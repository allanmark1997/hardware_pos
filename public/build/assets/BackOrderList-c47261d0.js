import{r as v,T as B,p as $,d as p,a as e,b as a,q as F,e as w,F as b,g as M,t as l,w as _,O as k,o as i,f as n,c as R,u as f,n as A}from"./app-7f390f71.js";import{_ as I}from"./Button-cb921c29.js";import{_ as h}from"./Icon-9324afd6.js";import{_ as H}from"./Pagination2-d66d04c1.js";import{_ as S}from"./TextInput-4e29b1d4.js";import{_ as L}from"./SecondaryButton-f7ef1962.js";import{_ as j}from"./ConfirmationModal-d56c1901.js";import{h as q}from"./moment-fbc5633a.js";import{l as r}from"./index-6dabe31e.js";import"./Modal-2fca8c58.js";const D={class:"flex justify-between mt-2"},E={class:"flex gap-2"},Y={class:"flex gap-2"},G={class:"flex"},K=e("span",{class:"text-md mt-2 mr-2"},"From",-1),U={class:"flex"},Q=e("span",{class:"text-md mt-2 mr-2"},"To",-1),W=["href"],J={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},X={class:"container mx-auto"},Z={class:"relative overflow-x-auto"},ee={class:"w-full text-sm text-left text-gray-500"},te=e("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Processed by"),e("th",{scope:"col",class:"px-6 py-3"},"Product name"),e("th",{scope:"col",class:"px-6 py-3"},"Price"),e("th",{scope:"col",class:"px-6 py-3"},"Discount"),e("th",{scope:"col",class:"px-6 py-3"},"Quantity"),e("th",{scope:"col",class:"px-6 py-3"},"Status"),e("th",{scope:"col",class:"px-6 py-3"},"Success Sub-total"),e("th",{scope:"col",class:"px-6 py-3"},"Inprogress Sub-total"),e("th",{scope:"col",class:"px-6 py-3"},"Remarks"),e("th",{scope:"col",class:"px-6 py-3"},"Created at"),e("th",{scope:"col",class:"px-6 py-3"},"Action")])],-1),se={class:"px-6 py-4"},oe=["src","alt"],ae={class:"px-6 py-4"},le={class:"px-6 py-4"},ne={class:"px-6 py-4"},re={class:"px-6 py-4"},ce={class:"px-6 py-4"},ie={key:0,class:"bg-green-400 rounded-md p-1 text-white flex"},de={key:1,class:"bg-orange-400 rounded-md p-1 text-white flex gap-1"},pe={key:2,class:"bg-red-400 rounded-md p-1 text-white flex gap-1"},ue={class:"px-6 py-4"},me={class:"px-6 py-4"},_e={class:"px-6 py-4"},he={class:"w-full text-sm text-gray-900 break-words"},fe={class:"px-6 py-4 flex gap-2"},xe={class:"px-6 py-4 gap-2"},ye={class:"flex items-center justify-between"},ge={class:"mt-6 text-sm text-gray-500"},ve=e("p",{class:"text-red-500"}," Once approved, this action can update the system and this is not reversible! ",-1),we=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),Be={__name:"BackOrderList",props:["back_orders","date_from","date_to"],setup(x){const y=x,u=v(y.date_from),m=v(y.date_to),d=v(!1),o=B({backorder:"",password:""}),T=c=>q(c).format("MM/DD/YYYY, h:mm:ss a"),g=c=>{const s=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return s.format(c),s.format(c)},O=()=>{k.get(route("back_orders.index",{date_from:u.value,date_to:m.value}))},C=()=>{k.get(route("back_orders.index",{date_from:null,date_to:null}))},V=c=>{o.backorder=c,d.value=!d.value},N=()=>{o.post(route("authenticate_user.authenticate_user"),{preserveScroll:!0,onSuccess:()=>{o.put(route("back_orders.authorize",o.backorder),{preserveScroll:!0,onSuccess:()=>{r.success("Successfully authorized back order as settled",{autoClose:!0,transition:r.TRANSITIONS.FLIP,position:r.POSITION.BOTTOM_RIGHT}),o.reset(),d.value=!1},onError:()=>{r.error(o.errors.message,{autoClose:!0,transition:r.TRANSITIONS.FLIP,position:r.POSITION.BOTTOM_RIGHT}),o.reset(),d.value=!1}})},onError:()=>{r.error(o.errors.message,{autoClose:!0,transition:r.TRANSITIONS.FLIP,position:r.POSITION.BOTTOM_RIGHT})}})};return(c,s)=>{const P=$("Input");return i(),p(b,null,[e("div",D,[e("div",E,[e("div",Y,[e("div",G,[K,a(S,{id:"date_from",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),e("div",U,[Q,a(S,{id:"date_to",modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t),type:"date",class:"mt-1 block w-full",onKeyup:F(O,["enter"])},null,8,["modelValue","onKeyup"])]),u.value||m.value?(i(),p("button",{key:0,class:"h-10 my-auto mt-5",onClick:C},[a(h,{icon:"close_icon",size:"sm"})])):w("",!0)])]),e("a",{href:c.route("back_orders.export",{date_from:u.value,date_to:m.value}),class:"bg-green-400 hover:bg-green-600 hover:text-white rounded-lg my-auto p-2"},"Export Back-orders",8,W)]),e("section",J,[e("div",X,[e("div",Z,[e("table",ee,[te,e("tbody",null,[(i(!0),p(b,null,M(x.back_orders.data,(t,z)=>(i(),p("tr",{key:z,class:"bg-white border-"},[e("td",se,[e("img",{class:"h-8 w-8 rounded-full object-cover",src:t.user.profile_photo_url,alt:t.user.name},null,8,oe),n(" "+l(t.user.name),1)]),e("td",ae,l(t.product.name),1),e("td",le,l(g(t.price.price)),1),e("td",ne,l(t.discount.discount)+"%",1),e("td",re,l(t.quantity),1),e("td",ce,[t.status==1?(i(),p("span",ie,[a(h,{icon:"check",size:"sm"}),n(" Success ")])):t.status==0?(i(),p("span",de,[a(h,{icon:"wrong",size:"sm"}),n(" Pending ")])):(i(),p("span",pe,[a(h,{icon:"wrong",size:"sm"}),n(" Cancelled ")]))]),e("td",ue,l(g(t.status==1?t.price.price*t.quantity:0)),1),e("td",me,l(g(t.status==0?t.price.price*t.quantity:0)),1),e("td",_e,[e("p",he,l(t.remarks),1)]),e("td",fe,[a(h,{icon:"calendar",size:"sm"}),n(" "+l(T(t.created_at)),1)]),e("td",xe,[t.status==0?(i(),R(I,{key:0,onClick:be=>V(t)},{default:_(()=>[n("Authorize")]),_:2},1032,["onClick"])):w("",!0)])]))),128))])])]),e("div",ye,[a(H,{links:y.back_orders.links,date_from:u.value,date_to:m.value},null,8,["links","date_from","date_to"]),e("p",ge," Showing "+l(x.back_orders.data.length)+" Back-orders ",1)])])]),a(j,{show:d.value,onClose:s[4]||(s[4]=t=>d.value=!1),maxWidth:"2xl"},{title:_(()=>[n(" Please input administrators pass code")]),content:_(()=>[ve,a(P,{type:"password",label:"Administrator's passcode",modelValue:f(o).password,"onUpdate:modelValue":s[2]||(s[2]=t=>f(o).password=t)},null,8,["modelValue"])]),footer:_(()=>[a(L,{onClick:s[3]||(s[3]=t=>d.value=!1),class:"mr-2"},{default:_(()=>[n(" nevermind ")]),_:1}),a(I,{class:A([{"opacity-25":f(o).processing},"bg-green-200 hover:bg-green-400"]),disabled:f(o).processing,onClick:N},{default:_(()=>[we,n("Â Submit ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64)}}};export{Be as default};
