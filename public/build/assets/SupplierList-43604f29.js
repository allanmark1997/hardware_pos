import{r as k,T as V,d as i,a as e,F as I,g as $,e as x,b as l,t as m,w as c,o as d,f,n as P,u as n,K as y,h as L}from"./app-5288e762.js";import{_ as E}from"./Pagination2-4c002776.js";import{_ as Y}from"./DialogModal-204db073.js";import{_ as J}from"./ConfirmationModal-9fdd2168.js";import{_ as j}from"./SecondaryButton-fb250ca0.js";import{_ as T}from"./Button-aefc40f3.js";import{_ as w}from"./Icon-4efc1449.js";import{_ as N}from"./Input-d51c71c4.js";import{_ as S}from"./InputError-abd5772f.js";import{h as M}from"./moment-fbc5633a.js";import{l as r}from"./index-c7571d86.js";import"./Modal-9d05c240.js";const W={class:"container px-4 mx-auto"},K={class:"flex flex-col mt-6"},X={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},q={class:"text-gray-600 p-10"},Q={class:"container px-5 mx-auto"},Z={class:"flex flex-wrap -m-4"},ee={class:"bg-gray-50 border border-1 border-yellow-400 shadow-xl p-6 rounded-lg group"},se={class:""},te=["src","alt"],oe={class:"text-lg text-gray-900 font-medium title-font mb-4"},ae={class:"flex mt-4 gap-2"},le={class:"text-sm"},ne={class:"flex mt-1 gap-2"},re={class:"text-sm"},ie={class:"flex mt-1 gap-2"},ce={class:"text-sm"},de={class:"flex mt-1 gap-2"},ue={class:"text-sm"},me={key:0,class:"text-sm mt-2 flex justify-center w-100 whitespace-nowrap"},pe=["onClick"],_e=["onClick"],fe={key:0,class:"mx-auto text-center"},ge=e("p",{class:"text-4xl text-gray-700"},"No Suppliers!",-1),he=[ge],ve={class:"flex items-center justify-between my-6"},xe={class:"mt-6 text-sm text-gray-500"},we=e("p",{class:"text-red-500"}," Clicking can update the system and it may cause a possible error! ",-1),be=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),ke={class:"flex-shrink-0"},ye=["src","alt"],Se={class:"flex-1 min-w-0"},Ce={class:"text-sm font-medium text-gray-900 truncate"},Ie={class:"text-sm text-gray-500 truncate"},Te={class:"grid grid-cols-12 gap-2"},Ne={key:0,class:"col-span-12 mx-auto"},Oe=["src"],Ve=["onClick"],$e=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{class:"text-red-500","stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),Pe=e("span",{class:"text-red-500"},"Remove",-1),Le=[$e,Pe],je=e("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[e("svg",{"aria-hidden":"true",class:"w-8 h-8 mb-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mb-1 text-sm text-gray-500 dark:text-gray-400"},[e("span",{class:"font-semibold"},"Click to upload"),f(" or drag and drop ")]),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," PNG, JPG or JPEG (MAX.1024kb) ")],-1),Me=e("input",{id:"profile_photo",type:"file",accept:"image/png, image/gif, image/jpeg",class:"hidden"},null,-1),Re=[je,Me],Ae={class:"col-span-12"},Be={class:"col-span-12"},Fe={class:"col-span-12"},Ue=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),Ze={__name:"SupplierList",props:["suppliers","search"],setup(R){const h=R,p=k(!1),_=k(!1),g=k(""),u=k([]),v=V({status:null,type:!0}),a=V({supplier_name:"",address:"",mobile_no:"",image:[]}),O=(o,t)=>{v.status=o,g.value=t,p.value=!p.value},A=o=>{u.value=[],u.value.push(o.image),a.supplier_name=o.supplier_name,a.address=o.address,a.mobile_no=o.mobile_no,g.value=o,_.value=!_.value},B=o=>M(o).format("MMMM Do YYYY"),F=o=>M(o).fromNow(),U=()=>{v.put(route("suppliers.update_supplier",{supplier:g.value}),{preserveScroll:!0,onSuccess:()=>{r.success("Supplier successfully updated!",{autoClose:1e3,transition:r.TRANSITIONS.FLIP,position:r.POSITION.TOP_RIGHT}),p.value=!p.value,v.reset(),g.value.reset()},onError:o=>{r.error("Something went wrong "+o,{autoClose:1e3,transition:r.TRANSITIONS.FLIP,position:r.POSITION.TOP_RIGHT})}})},z=()=>{a.post(route("suppliers.update_supplier_details",{supplier:g.value}),{preserveScroll:!0,onSuccess:()=>{r.success("Supplier successfully updated!",{autoClose:1e3,transition:r.TRANSITIONS.FLIP,position:r.POSITION.TOP_RIGHT}),_.value=!_.value,a.reset(),g.value.reset()},onError:o=>{r.error("Something went wrong "+o,{autoClose:1e3,transition:r.TRANSITIONS.FLIP,position:r.POSITION.TOP_RIGHT})}})},D=()=>{let o=document.getElementById("profile_photo");o.click(),o.onchange=t=>{u.value.push(window.URL.createObjectURL(t.target.files[0])),a.image=t.target.files[0]}},G=o=>{o.preventDefault();for(const s of o.dataTransfer.files){var t=URL.createObjectURL(s);u.value.push(t),a.image=s}},H=o=>{u.value.splice(o,1),a.image=null};return(o,t)=>(d(),i(I,null,[e("section",W,[e("div",K,[e("div",X,[e("section",q,[e("div",Q,[e("div",Z,[(d(!0),i(I,null,$(h.suppliers.data,(s,b)=>(d(),i("div",{key:b,class:"xl:w-1/3 md:w-1/2 p-4"},[e("div",ee,[e("div",se,[l(T,{onClick:C=>A(s),class:""},{default:c(()=>[l(w,{icon:"pencil",size:"sm"})]),_:2},1032,["onClick"])]),e("img",{class:"h-40 rounded max-w- object-fit object-center mb-6 mx-auto",src:s.image,alt:s.name},null,8,te),e("h2",oe,m(s.supplier_name),1),e("div",ae,[l(w,{icon:"mobile",size:"sm"}),e("p",le,m(s.mobile_no),1)]),e("div",ne,[l(w,{icon:"location",size:"sm"}),e("p",re,m(s.address),1)]),e("div",ie,[l(w,{icon:"calendar",size:"sm"}),e("p",ce,m(B(s.created_at)),1)]),e("div",de,[l(w,{icon:"clock",size:"sm"}),e("p",ue,m(F(s.updated_at)),1)]),s.type!=0?(d(),i("div",me,[s.status==0&&s.type!=0?(d(),i("button",{key:0,onClick:C=>O(!0,s),class:"p-2 bg-green-400 rounded-lg hover:bg-green-600"}," Activate ",8,pe)):s.status==1&&s.type!=0?(d(),i("button",{key:1,onClick:C=>O(!1,s),class:"p-2 bg-red-400 rounded-lg hover:bg-red-600"}," Deactivate ",8,_e)):x("",!0)])):x("",!0)])]))),128)),h.suppliers.data.length==0?(d(),i("div",fe,he)):x("",!0)])])])])]),e("div",ve,[l(E,{links:h.suppliers.links,search:h.search},null,8,["links","search"]),e("p",xe," Showing "+m(h.suppliers.data.length)+" Suppliers ",1)])]),l(J,{show:p.value,onClose:t[1]||(t[1]=s=>p.value=!1),maxWidth:"2xl"},{title:c(()=>[f(" Are you sure you want to update this supplier status?")]),content:c(()=>[we]),footer:c(()=>[l(j,{onClick:t[0]||(t[0]=s=>p.value=!1),class:"mr-2"},{default:c(()=>[f(" nevermind ")]),_:1}),l(T,{class:P([{"opacity-25":n(v).processing},"bg-green-200 hover:bg-green-400"]),disabled:n(v).processing,onClick:U},{default:c(()=>[be,f(" Submit ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(Y,{show:_.value,onClose:t[8]||(t[8]=s=>_.value=!1),maxWidth:"2xl"},{title:c(()=>[f(" Update Supplier ")]),content:c(()=>[e("div",ke,[e("img",{class:"w-10 h-10 rounded-full",src:n(y)().props.auth.user.profile_photo_url,alt:n(y)().props.auth.user.name},null,8,ye)]),e("div",Se,[e("p",Ce,m(n(y)().props.auth.user.name),1),e("p",Ie,m(n(y)().props.auth.user.email),1)]),e("div",Te,[u.value.length!=0?(d(),i("div",Ne,[(d(!0),i(I,null,$(u.value,(s,b)=>(d(),i("div",{key:b,class:"flex-shrink-0"},[e("img",{class:"w-16 h-16 rounded-full",src:s},null,8,Oe),e("button",{onClick:C=>H(b),class:"flex text-gray-400 hover:text-gray-600"},Le,8,Ve)]))),128))])):x("",!0),u.value.length!=1?(d(),i("div",{key:1,class:"col-span-12",onDragover:t[2]||(t[2]=L(()=>{},["prevent"])),onDrop:t[3]||(t[3]=L(()=>{},["prevent"]))},[e("label",{onDrop:G,onClick:D,for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-20 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},Re,32)],32)):x("",!0),l(S,{message:n(a).errors.image,class:"mt-2 col-span-12"},null,8,["message"]),e("div",Ae,[l(N,{label:"Supplier's name",type:"text",class:"mt-1 block w-full",modelValue:n(a).supplier_name,"onUpdate:modelValue":t[4]||(t[4]=s=>n(a).supplier_name=s),autofocus:""},null,8,["modelValue"]),l(S,{message:n(a).errors.supplier_name,class:"mt-2"},null,8,["message"])]),e("div",Be,[l(N,{label:"Contact No",type:"text",class:"block w-full",modelValue:n(a).mobile_no,"onUpdate:modelValue":t[5]||(t[5]=s=>n(a).mobile_no=s),autofocus:""},null,8,["modelValue"]),l(S,{message:n(a).errors.mobile_no,class:"mt-2"},null,8,["message"])]),e("div",Fe,[l(N,{label:"Supplier's Address",type:"text",class:"block w-full",modelValue:n(a).address,"onUpdate:modelValue":t[6]||(t[6]=s=>n(a).address=s),autofocus:""},null,8,["modelValue"]),l(S,{message:n(a).errors.address,class:"mt-2"},null,8,["message"])])])]),footer:c(()=>[l(j,{onClick:t[7]||(t[7]=s=>_.value=!1),class:"mr-2"},{default:c(()=>[f(" nevermind ")]),_:1}),l(T,{class:P([{"opacity-25":n(a).processing},"bg-yellow-200 hover:bg-yellow-400"]),disabled:n(a).processing,onClick:z},{default:c(()=>[Ue,f(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{Ze as default};
