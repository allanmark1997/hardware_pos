import{r as v,y as q,d as c,a as e,b as g,s as k,e as P,F as f,g as V,n as S,t as r,f as D,O as C,o as i}from"./app-c418f3a7.js";import{_ as $}from"./Icon-81970db0.js";import{_ as j}from"./TextInput-5d01b380.js";import{_ as N}from"./Input-cc690854.js";import{h as z}from"./moment-fbc5633a.js";import"./index-ed5717c4.js";const B={class:"flex justify-between mt-2"},E={class:"flex gap-2"},H={class:"flex gap-2"},L={class:"flex"},O=e("span",{class:"text-md mt-2 mr-2"},"From",-1),A={class:"flex"},G=e("span",{class:"text-md mt-2 mr-2"},"To",-1),J={class:"flex"},Q={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},R={class:"container mx-auto"},W={class:"relative overflow-x-auto"},X={class:"w-full text-sm text-left text-gray-500"},Z=e("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Transaction ID"),e("th",{scope:"col",class:"px-6 py-3"},"Products")])],-1),ee={class:"px-6 py-4"},te={scope:"row",class:"px-2 py-1 text-gray-900"},se={class:"w-full text-xs text-left text-gray-500"},le=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-1 py-1 flex"},"Product"),e("th",{scope:"col",class:"px-1 py-1"},"No."),e("th",{scope:"col",class:"px-1 py-1"},"Price"),e("th",{scope:"col",class:"px-1 py-1"},"Discount %"),e("th",{scope:"col",class:"px-1 py-1"},"Type"),e("th",{scope:"col",class:"px-1 py-1"},"Total Discount"),e("th",{scope:"col",class:"px-1 py-1"},"Sub-total"),e("th",{scope:"col",class:"px-1 py-1"},"Created Date")])],-1),oe={class:"px-1 py-1 flex"},ae={class:"w-[20vmin] break-words"},ne={class:"px-1 py-1"},re={class:"px-1 py-1"},ce={class:"px-1 py-1"},ie={class:"px-1 py-1"},de={key:0,class:"bg-red-300 rounded-lg p-1"},ue={key:1,class:"bg-green-300 rounded-lg p-1"},pe={class:"px-1 py-1"},_e={class:"px-1 py-1"},me={class:"px-1 py-1"},ge={class:"flex items-center justify-between"},xe={class:"w-full"},ye={class:"inline-flex -space-x-px text-sm"},he=["disabled"],ve=["onClick"],fe=["onClick"],be=["disabled"],we={class:"mt-6 text-sm text-gray-500 flex justify-between gap-4"},ke={class:"text-sm text-gray-700 flex mt-4"},Ve={class:"text-sm text-gray-700 mt-4"},De={class:"font-semibold text-gray-900"},Ce={class:"font-semibold text-gray-900"},Ke={__name:"TransactionList",props:["transactions","date_from","date_to","search"],setup(F){const d=F,x=v(d.date_from),y=v(d.date_to),h=v(d.search),a=v({}),u=v(10);function p(n,o,s){var o=o||1,s=s||10,_=(o-1)*s,m=n.slice(_).slice(0,s),w=Math.ceil(n.length/s);return{page:o,per_page:s,prev_page:o-1?o-1:null,next_page:w>o?o+1:null,total:n.length,total_pages:w,data:m}}console.log(d.transactions),q(()=>{a.value=p(d.transactions,1,u.value),console.log(a.value)});const K=n=>z(n).format("MM/DD/YYYY, h:mm:ss a"),b=n=>{let o=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:20,minimumSignificantDigits:1,maximumSignificantDigits:20}).format(n).split("."),_=String(o[1]).slice(0,2),m=_=="un"?"00":_;return String(o[0])+"."+m},T=()=>{C.get(route("return.index",{search:h.value,date_from:x.value,date_to:y.value}))},I=()=>{C.get(route("return.index",{search:h.value,date_from:x.value,date_to:y.value}))},M=()=>{C.get(route("return.index",{date_from:null,date_to:null,search:null}))},U=n=>{let l=0,t=n.sale_discount.discount/100;for(let o=0;o<n.quantity;o++)l+=n.price.price*t;return l},Y=n=>{let l=0,t=0,o=n.sale_discount.discount/100;for(let s=0;s<n.quantity;s++)t=n.price.price*o,l+=n.price.price-t;return l};return(n,l)=>(i(),c(f,null,[e("div",B,[e("div",E,[e("div",H,[e("div",L,[O,g(j,{id:"date_from",modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=t=>x.value=t),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),e("div",A,[G,g(j,{id:"date_to",modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=t=>y.value=t),type:"date",class:"mt-1 block w-full",onKeyup:k(T,["enter"])},null,8,["modelValue","onKeyup"])]),e("div",J,[g(N,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=t=>h.value=t),class:"rounded-lg w-[30vmin]",type:"text",label:"Search transaction",onKeyup:k(I,["enter"])},null,8,["modelValue","onKeyup"])]),x.value||y.value||h.value?(i(),c("button",{key:0,class:"h-10 my-auto mt-5",onClick:M},[g($,{icon:"close_icon",size:"sm"})])):P("",!0)])])]),e("section",Q,[e("div",R,[e("div",W,[e("table",X,[Z,e("tbody",null,[(i(!0),c(f,null,V(a.value.data,(t,o)=>(i(),c("tr",{key:o,class:"bg-white border-"},[e("td",ee,r(t.transaction_id),1),e("td",te,[e("table",se,[le,e("tbody",null,[(i(!0),c(f,null,V(t.data,(s,_)=>{var m;return i(),c("tr",{key:_,class:"bg-white border-"},[e("td",oe,[g($,{icon:"shopping_cart",size:"xs"}),e("p",ae,r((m=s.product)==null?void 0:m.name),1)]),e("td",ne,r(s.quantity),1),e("td",re,r(b(s.price.price)),1),e("td",ce,r(s.sale_discount.discount)+"% ",1),e("td",ie,[s.type==1?(i(),c("small",de,"Damage")):s.type==2?(i(),c("small",ue,"Inventory")):P("",!0)]),e("td",pe,[e("small",null,r(b(U(s))),1)]),e("td",_e,[e("small",null,r(b(Y(s))),1)]),e("td",me,[e("small",null,r(K(s.created_at)),1)])])}),128))])])])]))),128))])])]),e("div",ge,[e("nav",xe,[e("ul",ye,[e("li",null,[e("button",{onClick:l[3]||(l[3]=t=>a.value=p(d.transactions,a.value.prev_page,1)),class:S(["flex items-center justify-center px-3 h-8 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700",a.value.prev_page==null?"cursor-not-allowed text-gray-100":""]),disabled:a.value.prev_page==null}," Previous ",10,he)]),(i(),c(f,null,V(10,(t,o)=>e("li",{key:o},[a.value.page!=t?(i(),c("a",{key:0,href:"#",onClick:s=>a.value=p(d.transactions,t,u.value),class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700"},r(t),9,ve)):(i(),c("a",{key:1,href:"#",onClick:s=>a.value=p(d.transactions,t,u.value),class:"flex items-center justify-center px-3 h-8 text-blue-600 border border-gray-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700"},r(t),9,fe))])),64)),e("li",null,[e("button",{onClick:l[4]||(l[4]=t=>a.value=p(d.transactions,a.value.next_page,u.value)),disabled:a.value.next_page==null,class:S(["flex items-center justify-center px-3 h-8 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700",a.value.next_page==null?"cursor-not-allowed text-gray-100":""])}," Next ",10,be)])])]),e("p",we,[g(N,{type:"number",label:"Input showing",modelValue:u.value,"onUpdate:modelValue":l[5]||(l[5]=t=>u.value=t),onKeyup:l[6]||(l[6]=k(t=>a.value=p(d.transactions,1,u.value),["enter"]))},null,8,["modelValue"]),e("span",ke," Page: "+r(a.value.page),1),e("span",Ve,[D(" Showing "),e("span",De,r(a.value.per_page),1),D(" of "),e("span",Ce,r(a.value.total),1),D(" Entries ")])])])])])],64))}};export{Ke as default};
