import{r as x,T,d as i,a as t,b as c,p as z,e as y,F as g,g as B,t as s,O as v,o as l,f as d,c as N,w as O}from"./app-2f54e3ea.js";import{_ as P}from"./Button-af8759b8.js";import{_ as p}from"./Icon-b88412fa.js";import{_ as C}from"./Pagination2-aa1a25bb.js";import{_ as w}from"./TextInput-25b3422d.js";import{h as F}from"./moment-fbc5633a.js";import{l as f}from"./index-d6344bfc.js";const $={class:"flex justify-between mt-2"},D={class:"flex gap-2"},Y={class:"flex gap-2"},j={class:"flex"},q=t("span",{class:"text-md mt-2 mr-2"},"From",-1),A={class:"flex"},H=t("span",{class:"text-md mt-2 mr-2"},"To",-1),K=["href"],L={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},M={class:"container mx-auto"},E={class:"relative overflow-x-auto"},R={class:"w-full text-sm text-left text-gray-500"},U=t("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"},"Processed by"),t("th",{scope:"col",class:"px-6 py-3"},"Product name"),t("th",{scope:"col",class:"px-6 py-3"},"Price"),t("th",{scope:"col",class:"px-6 py-3"},"Discount"),t("th",{scope:"col",class:"px-6 py-3"},"Quantity"),t("th",{scope:"col",class:"px-6 py-3"},"Status"),t("th",{scope:"col",class:"px-6 py-3"},"Success Sub-total"),t("th",{scope:"col",class:"px-6 py-3"},"Inprogress Sub-total"),t("th",{scope:"col",class:"px-6 py-3"},"Created at"),t("th",{scope:"col",class:"px-6 py-3"},"Action")])],-1),G={class:"px-6 py-4"},Q=["src","alt"],J={class:"px-6 py-4"},W={class:"px-6 py-4"},X={class:"px-6 py-4"},Z={class:"px-6 py-4"},tt={class:"px-6 py-4"},et={key:0,class:"bg-green-400 rounded-md p-1 text-white flex"},st={key:1,class:"bg-red-400 rounded-md p-1 text-white flex gap-1"},ot={class:"px-6 py-4"},at={class:"px-6 py-4"},ct={class:"px-6 py-4 flex gap-2"},lt={class:"px-6 py-4 gap-2"},nt={class:"flex items-center justify-between"},rt={class:"mt-6 text-sm text-gray-500"},xt={__name:"BackOrderList",props:["back_orders","date_from","date_to"],setup(u){const _=u,n=x(_.date_from),r=x(_.date_to),m=T({backorder:""}),b=o=>F(o).format("MM/DD/YYYY, h:mm:ss a"),h=o=>{const a=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return a.format(o),a.format(o)},k=()=>{v.get(route("back_orders.index",{date_from:n.value,date_to:r.value}))},S=()=>{v.get(route("back_orders.index",{date_from:null,date_to:null}))},V=o=>{m.backorder=o,m.put(route("back_orders.authorize",m.backorder),{preserveScroll:!0,onSuccess:()=>{f.success("Successfully authorized back order as settled",{autoClose:!0,transition:f.TRANSITIONS.FLIP,position:f.POSITION.BOTTOM_RIGHT})}})};return(o,a)=>(l(),i(g,null,[t("div",$,[t("div",D,[t("div",Y,[t("div",j,[q,c(w,{id:"date_from",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),t("div",A,[H,c(w,{id:"date_to",modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=e=>r.value=e),type:"date",class:"mt-1 block w-full",onKeyup:z(k,["enter"])},null,8,["modelValue","onKeyup"])]),n.value||r.value?(l(),i("button",{key:0,class:"h-10 my-auto mt-5",onClick:S},[c(p,{icon:"close_icon",size:"sm"})])):y("",!0)])]),t("a",{href:o.route("back_orders.export",{date_from:n.value,date_to:r.value}),class:"bg-green-400 hover:bg-green-600 hover:text-white rounded-lg my-auto p-2"},"Export Back-orders",8,K)]),t("section",L,[t("div",M,[t("div",E,[t("table",R,[U,t("tbody",null,[(l(!0),i(g,null,B(u.back_orders.data,(e,I)=>(l(),i("tr",{key:I,class:"bg-white border-"},[t("td",G,[t("img",{class:"h-8 w-8 rounded-full object-cover",src:e.user.profile_photo_url,alt:e.user.name},null,8,Q),d(" "+s(e.user.name),1)]),t("td",J,s(e.product.name),1),t("td",W,s(h(e.price.price)),1),t("td",X,s(e.discount.discount)+"%",1),t("td",Z,s(e.quantity),1),t("td",tt,[e.status==1?(l(),i("span",et,[c(p,{icon:"check",size:"sm"}),d(" Success ")])):(l(),i("span",st,[c(p,{icon:"wrong",size:"sm"}),d(" In progress ")]))]),t("td",ot,s(h(e.status==1?e.price.price*e.quantity:0)),1),t("td",at,s(h(e.status==0?e.price.price*e.quantity:0)),1),t("td",ct,[c(p,{icon:"calendar",size:"sm"}),d(" "+s(b(e.created_at)),1)]),t("td",lt,[e.status==0?(l(),N(P,{key:0,onClick:it=>V(e)},{default:O(()=>[d("Authorize")]),_:2},1032,["onClick"])):y("",!0)])]))),128))])])]),t("div",nt,[c(C,{links:_.back_orders.links,date_from:n.value,date_to:r.value},null,8,["links","date_from","date_to"]),t("p",rt," Showing "+s(u.back_orders.data.length)+" Back-orders ",1)])])])],64))}};export{xt as default};
