import{r as m,d as l,a as e,b as o,s as C,e as q,F as k,g as $,t as a,w as v,O as S,o as c,f as i}from"./app-9c8d7fa7.js";import{_ as u}from"./Icon-b9da74ac.js";import{_ as E}from"./Pagination2-b740d3bd.js";import{_ as z}from"./TextInput-f20ee1ed.js";import{_ as T}from"./Input-7104e3fe.js";import{_ as Y}from"./DialogModal-5bf781fc.js";import{h as B}from"./moment-fbc5633a.js";import"./index-8a4e4f75.js";import{_ as H}from"./SecondaryButton-98604f2d.js";import"./Modal-e8cf22c7.js";const I={class:"flex justify-between mt-2"},L={class:"flex gap-2"},M={class:"flex gap-2"},O={class:"flex"},R=e("span",{class:"text-md mt-2 mr-2"},"From",-1),W={class:"flex"},A=e("span",{class:"text-md mt-2 mr-2"},"To",-1),G={class:"flex"},J=["href"],Q={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},X={class:"container mx-auto"},Z={class:"relative overflow-x-auto"},ee={class:"w-full text-sm text-left text-gray-500"},te=e("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Delivery ID"),e("th",{scope:"col",class:"px-6 py-3"},"Supplier name"),e("th",{scope:"col",class:"px-6 py-3"},"Receive by"),e("th",{scope:"col",class:"px-6 py-3"},"Status"),e("th",{scope:"col",class:"px-6 py-3"},"Total Success"),e("th",{scope:"col",class:"px-6 py-3"},"Total Unsuccess"),e("th",{scope:"col",class:"px-6 py-3"},"Created at")])],-1),se=["onClick"],oe={class:"px-6 py-4"},ae={class:"px-6 py-4"},le=["src","alt"],ce={class:"px-6 py-4"},ne=["src","alt"],ie={class:"px-6 py-4"},re={key:0,class:"bg-green-400 rounded-md p-1 text-white flex"},de={key:1,class:"bg-red-400 rounded-md p-1 text-white flex"},ue={class:"px-6 py-4"},pe={class:"px-6 py-4"},_e={class:"px-6 py-4 flex gap-2"},me={class:"flex items-center justify-between"},he={class:"mt-6 text-sm text-gray-500"},xe={class:"text-gray-600 truncate"},fe={class:"w-full text-xs text-left text-gray-500"},ge=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-1 py-1"},"Product"),e("th",{scope:"col",class:"px-1 py-1"},"No."),e("th",{scope:"col",class:"px-1 py-1"},"Price"),e("th",{scope:"col",class:"px-1 py-1"},"Status"),e("th",{scope:"col",class:"px-1 py-1"},"Sub-total")])],-1),ye={class:"px-1 py-1 flex pt-2 font-bold"},ve={class:"w-[20vmin] break-words"},be={class:"px-1 py-1"},we={class:"px-1 py-1"},ke={class:"px-1 py-1"},Se={key:0,class:"bg-green-400 rounded-md p-1 text-white flex gap-1"},De={key:1,class:"bg-red-400 rounded-md p-1 text-white flex gap-1"},Ve={class:"px-1 py-1"},Te={__name:"DeliveryList",props:["deliveries","date_from","date_to","search"],setup(b){const x=b,r=m(x.date_from),d=m(x.date_to),h=m(x.search),f=m(!1),D=m(),V=m(),F=n=>B(n).format("MM/DD/YYYY, h:mm:ss a"),g=n=>{let p=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:20,minimumSignificantDigits:1,maximumSignificantDigits:20}).format(n).split("."),w=String(p[1]).slice(0,2),y=w=="un"?"00":w;return String(p[0])+"."+y},N=()=>{S.get(route("deliveries.index",{date_from:r.value,date_to:d.value}))},P=()=>{S.get(route("deliveries.index",{search:h.value,date_from:r.value,date_to:d.value}))},U=()=>{S.get(route("deliveries.index",{date_from:null,date_to:null,search:null}))},j=n=>{let s=0;return n.forEach(t=>{t.status==1&&(s+=t.quantity*t.price.price)}),s},K=n=>{let s=0;return n.forEach(t=>{t.status==0&&(s+=t.quantity*t.price.price)}),s};return(n,s)=>(c(),l(k,null,[e("div",I,[e("div",L,[e("div",M,[e("div",O,[R,o(z,{id:"date_from",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),e("div",W,[A,o(z,{id:"date_to",modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=t=>d.value=t),type:"date",class:"mt-1 block w-full",onKeyup:C(N,["enter"])},null,8,["modelValue","onKeyup"])]),e("div",G,[o(T,{modelValue:h.value,"onUpdate:modelValue":s[2]||(s[2]=t=>h.value=t),class:"rounded-lg w-[30vmin]",type:"text",label:"Search delivery",onKeyup:C(P,["enter"])},null,8,["modelValue","onKeyup"])]),r.value||d.value||h.value?(c(),l("button",{key:0,class:"h-10 my-auto mt-5",onClick:U},[o(u,{icon:"close_icon",size:"sm"})])):q("",!0)])]),e("a",{href:n.route("deliveries.export",{date_from:r.value,date_to:d.value}),class:"bg-green-400 hover:bg-green-600 hover:text-white rounded-lg my-auto p-2"},"Export Delivery",8,J)]),e("section",Q,[e("div",X,[e("div",Z,[e("table",ee,[te,e("tbody",null,[(c(!0),l(k,null,$(b.deliveries.data,(t,p)=>{var _;return c(),l("tr",{key:p,class:"bg-white hover:bg-gray-100 cursor-pointer",onClick:w=>{var y;return f.value=!0,D.value=t.details,V.value=(y=t.supplier)==null?void 0:y.supplier_name}},[e("td",oe,a(t.id),1),e("td",ae,[e("img",{class:"h-8 w-8 rounded-full object-cover",src:t.supplier.image,alt:t.supplier.supplier_name},null,8,le),i(" "+a(t.supplier.supplier_name),1)]),e("td",ce,[e("img",{class:"h-8 w-8 rounded-full object-cover",src:t.user_receiver.profile_photo_url,alt:t.user_receiver.supplier_name},null,8,ne),i(" "+a(((_=t.user_receiver)==null?void 0:_.name)??"Pending"),1)]),e("td",ie,[t.status==1?(c(),l("span",re,[o(u,{icon:"check",size:"sm"}),i(" Success ")])):(c(),l("span",de,[o(u,{icon:"wrong",size:"sm"}),i(" Unuccess ")]))]),e("td",ue,a(g(j(t.details))),1),e("td",pe,a(g(K(t.details))),1),e("td",_e,[o(u,{icon:"calendar",size:"md"}),i(" "+a(F(t.created_at)),1)])],8,se)}),128))])])]),e("div",me,[o(E,{links:x.deliveries.links,date_from:r.value,date_to:d.value,search:h.value},null,8,["links","date_from","date_to","search"]),e("p",he," Showing "+a(b.deliveries.data.length)+" Deliveries ",1)])])]),o(Y,{show:f.value,maxWidth:"2xl",onClose:s[4]||(s[4]=t=>f.value=!1)},{title:v(()=>[e("span",xe," Delivery details for ("+a(V.value)+")",1)]),content:v(()=>[e("table",fe,[ge,e("tbody",null,[(c(!0),l(k,null,$(D.value,(t,p)=>{var _;return c(),l("tr",{key:p,class:"bg-white border-"},[e("td",ye,[o(u,{icon:"shopping_cart",size:"xs"}),e("p",ve,a((_=t.product)==null?void 0:_.name),1)]),e("td",be,a(t.quantity),1),e("td",we,a(g(t.price.price)),1),e("td",ke,[t.status==1?(c(),l("small",Se,[o(u,{icon:"check",size:"sm"}),i(" Success ")])):(c(),l("small",De,[o(u,{icon:"wrong",size:"xs"}),i(" Unsuccess ")]))]),e("td",Ve,[e("small",null,a(g(t.quantity*t.price.price)),1)])])}),128))])])]),footer:v(()=>[o(H,{class:"mr-2 bg-red-300",onClick:s[3]||(s[3]=t=>f.value=!1)},{default:v(()=>[i(" Close ")]),_:1})]),_:1},8,["show"])],64))}};export{Te as default};
