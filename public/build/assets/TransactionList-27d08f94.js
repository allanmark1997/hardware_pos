import{r as v,y as Y,d as i,a as e,b as x,s as V,e as q,F as f,g as D,n as P,t as r,f as b,O as C,o as u}from"./app-5288e762.js";import{_ as S}from"./Icon-4efc1449.js";import{_ as $}from"./TextInput-5479c79a.js";import{_ as j}from"./Input-d51c71c4.js";import{h as z}from"./moment-fbc5633a.js";import"./index-c7571d86.js";const B={class:"flex justify-between mt-2"},E={class:"flex gap-2"},H={class:"flex gap-2"},L={class:"flex"},O=e("span",{class:"text-md mt-2 mr-2"},"From",-1),A={class:"flex"},G=e("span",{class:"text-md mt-2 mr-2"},"To",-1),J={class:"flex"},Q={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},R={class:"container mx-auto"},W={class:"relative overflow-x-auto"},X={class:"w-full text-sm text-left text-gray-500"},Z=e("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Transaction ID"),e("th",{scope:"col",class:"px-6 py-3"},"Products")])],-1),ee={class:"px-6 py-4"},te={scope:"row",class:"px-2 py-1 text-gray-900 whitespace-nowrap"},se={class:"w-full text-xs text-left text-gray-500"},le=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-1 py-1 flex"},"Product"),e("th",{scope:"col",class:"px-1 py-1"},"No."),e("th",{scope:"col",class:"px-1 py-1"},"Price"),e("th",{scope:"col",class:"px-1 py-1"},"Discount %"),e("th",{scope:"col",class:"px-1 py-1"},"Total Discount"),e("th",{scope:"col",class:"px-1 py-1"},"Sub-total"),e("th",{scope:"col",class:"px-1 py-1"},"Created Date")])],-1),ae={class:"px-1 py-1 flex"},oe={class:"px-1 py-1"},ne={class:"px-1 py-1"},re={class:"px-1 py-1"},ce={class:"px-1 py-1"},ie={class:"px-1 py-1"},ue={class:"px-1 py-1"},de={class:"flex items-center justify-between"},pe={class:"w-full"},_e={class:"inline-flex -space-x-px text-sm"},me=["disabled"],xe=["onClick"],ge=["onClick"],ye=["disabled"],he={class:"mt-6 text-sm text-gray-500 flex justify-between gap-4"},ve={class:"text-sm text-gray-700 flex mt-4"},fe={class:"text-sm text-gray-700 mt-4"},be={class:"font-semibold text-gray-900"},we={class:"font-semibold text-gray-900"},$e={__name:"TransactionList",props:["transactions","date_from","date_to","search"],setup(N){const c=N,g=v(c.date_from),y=v(c.date_to),h=v(c.search),o=v({}),d=v(10);function p(n,l,a){var l=l||1,a=a||10,_=(l-1)*a,m=n.slice(_).slice(0,a),k=Math.ceil(n.length/a);return{page:l,per_page:a,prev_page:l-1?l-1:null,next_page:k>l?l+1:null,total:n.length,total_pages:k,data:m}}console.log(c.transactions),Y(()=>{o.value=p(c.transactions,1,d.value),console.log(o.value)});const F=n=>z(n).format("MM/DD/YYYY, h:mm:ss a"),w=n=>{let l=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:20,minimumSignificantDigits:1,maximumSignificantDigits:20}).format(n).split("."),_=String(l[1]).slice(0,2),m=_=="un"?"00":_;return String(l[0])+"."+m},K=()=>{C.get(route("return.index",{search:h.value,date_from:g.value,date_to:y.value}))},T=()=>{C.get(route("return.index",{search:h.value,date_from:g.value,date_to:y.value}))},I=()=>{C.get(route("return.index",{date_from:null,date_to:null,search:null}))},M=n=>{let s=0,t=n.sale_discount.discount/100;for(let l=0;l<n.quantity;l++)s+=n.price.price*t;return s},U=n=>{let s=0,t=0,l=n.sale_discount.discount/100;for(let a=0;a<n.quantity;a++)t=n.price.price*l,s+=n.price.price-t;return s};return(n,s)=>(u(),i(f,null,[e("div",B,[e("div",E,[e("div",H,[e("div",L,[O,x($,{id:"date_from",modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=t=>g.value=t),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),e("div",A,[G,x($,{id:"date_to",modelValue:y.value,"onUpdate:modelValue":s[1]||(s[1]=t=>y.value=t),type:"date",class:"mt-1 block w-full",onKeyup:V(K,["enter"])},null,8,["modelValue","onKeyup"])]),e("div",J,[x(j,{modelValue:h.value,"onUpdate:modelValue":s[2]||(s[2]=t=>h.value=t),class:"rounded-lg w-[30vmin]",type:"text",label:"Search transaction",onKeyup:V(T,["enter"])},null,8,["modelValue","onKeyup"])]),g.value||y.value||h.value?(u(),i("button",{key:0,class:"h-10 my-auto mt-5",onClick:I},[x(S,{icon:"close_icon",size:"sm"})])):q("",!0)])])]),e("section",Q,[e("div",R,[e("div",W,[e("table",X,[Z,e("tbody",null,[(u(!0),i(f,null,D(o.value.data,(t,l)=>(u(),i("tr",{key:l,class:"bg-white border-"},[e("td",ee,r(t.transaction_id),1),e("td",te,[e("table",se,[le,e("tbody",null,[(u(!0),i(f,null,D(t.data,(a,_)=>{var m;return u(),i("tr",{key:_,class:"bg-white border-"},[e("td",ae,[x(S,{icon:"shopping_cart",size:"xs"}),b(" "+r((m=a.product)==null?void 0:m.name),1)]),e("td",oe,r(a.quantity),1),e("td",ne,r(w(a.price.price)),1),e("td",re,r(a.sale_discount.discount)+"% ",1),e("td",ce,[e("small",null,r(w(M(a))),1)]),e("td",ie,[e("small",null,r(w(U(a))),1)]),e("td",ue,[e("small",null,r(F(a.created_at)),1)])])}),128))])])])]))),128))])])]),e("div",de,[e("nav",pe,[e("ul",_e,[e("li",null,[e("button",{onClick:s[3]||(s[3]=t=>o.value=p(c.transactions,o.value.prev_page,1)),class:P(["flex items-center justify-center px-3 h-8 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700",o.value.prev_page==null?"cursor-not-allowed text-gray-100":""]),disabled:o.value.prev_page==null}," Previous ",10,me)]),(u(),i(f,null,D(10,(t,l)=>e("li",{key:l},[o.value.page!=t?(u(),i("a",{key:0,href:"#",onClick:a=>o.value=p(c.transactions,t,d.value),class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700"},r(t),9,xe)):(u(),i("a",{key:1,href:"#",onClick:a=>o.value=p(c.transactions,t,d.value),class:"flex items-center justify-center px-3 h-8 text-blue-600 border border-gray-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700"},r(t),9,ge))])),64)),e("li",null,[e("button",{onClick:s[4]||(s[4]=t=>o.value=p(c.transactions,o.value.next_page,d.value)),disabled:o.value.next_page==null,class:P(["flex items-center justify-center px-3 h-8 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700",o.value.next_page==null?"cursor-not-allowed text-gray-100":""])}," Next ",10,ye)])])]),e("p",he,[x(j,{type:"number",label:"Input showing",modelValue:d.value,"onUpdate:modelValue":s[5]||(s[5]=t=>d.value=t),onKeyup:s[6]||(s[6]=V(t=>o.value=p(c.transactions,1,d.value),["enter"]))},null,8,["modelValue"]),e("span",ve," Page: "+r(o.value.page),1),e("span",fe,[b(" Showing "),e("span",be,r(o.value.per_page),1),b(" of "),e("span",we,r(o.value.total),1),b(" Entries ")])])])])])],64))}};export{$e as default};
