import{r as b,T as v,i as N,d as c,b as n,u as o,w as f,a as e,j as _,v as x,t as h,e as p,F as C,o as u,Z as O,c as P,f as E,n as L,h as V,K as A}from"./app-1d2e6a6e.js";import{A as R}from"./AuthenticationCard-86964d8d.js";import{_ as $}from"./AuthenticationCardLogo-d00acd3d.js";import{_ as w}from"./InputError-2d73d193.js";import{_ as k}from"./InputLabel-f66f71df.js";import{_ as B}from"./PrimaryButton-e5732f84.js";import{_ as I}from"./TextInput-d602c319.js";import{l}from"./index-d10eccd0.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logo_main-f6fb4bdb.js";const F={key:0,class:"mb-4 font-medium text-sm text-green-600"},M=["onSubmit"],j={class:"mt-4"},z={class:"mt-4"},U={class:"flex items-center justify-end mt-4"},D={key:1,class:"flex items-center justify-between mt-4"},G=e("span",{class:"w-1/5 border-b dark:border-gray-600 md:w-1/4"},null,-1),H=e("span",{class:"w-1/5 border-b dark:border-gray-600 md:w-1/4"},null,-1),q={key:0,class:""},K={id:"popup-modal",tabindex:"-1",class:"overflow-y-auto flex fixed justify-center w-full backdrop-blur-sm overflow-x-hidden fixed top-0 right-0 left-0 z-50 md:inset-0 h-modal md:h-full"},Y={class:"relative p-4 w-full animate mt-10 max-w-md h-full md:h-auto"},Z={class:"relative bg-white rounded-lg shadow"},J=e("div",{class:"p-2 w-full"},"Enter New",-1),Q={class:"p-2 w-full"},W={class:"relative"},X=e("label",{for:"name",class:"leading-7 text-sm text-gray-600"},"Secret code",-1),ee={class:"text-red-500"},te={class:"relative"},oe=e("label",{for:"name",class:"leading-7 text-sm text-gray-600"},"New Due",-1),se={class:"relative"},re=e("label",{for:"name",class:"leading-7 text-sm text-gray-600"},"New Key",-1),ae=e("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),le=e("span",{class:"sr-only"},"Close modal",-1),ne=[ae,le],ie={class:"p-6 text-center"},de=e("svg",{"aria-hidden":"true",class:"mx-auto mb-4 w-14 h-14 text-gray-400 dark:text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ue=e("h3",{class:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400"}," Are you sure you want to update expiry? ",-1),ve={__name:"Login",props:{canResetPassword:Boolean,status:String},setup(y){const i=b(!1),d=b(!1),s=v({email:"",password:"",remember:!1}),a=v({code:"",new_due:"",new_key:""}),T=()=>{s.transform(m=>({...m,remember:s.remember?"on":""})).post(route("login"),{onFinish:()=>s.reset("password"),onError:()=>{s.errors.expire!=null&&l.error(s.errors.expire,{autoClose:2e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT})}})};document.addEventListener("contextmenu",m=>m.preventDefault()),N(()=>{(s.errors.expire=="Sorry! SYSTEM MAINTENANCE"||s.errors.expire=="Looks like the inputed code is invalid, please update!")&&(d.value=!0)});const g=()=>{i.value=!i.value},S=()=>{a.new_due==""||a.new_key==""||a.code==""?l.error("Sorry, please fill out all fields!",{autoClose:2e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}):a.post(route("update_expire"),{preserveScroll:!0,onSuccess:()=>{a.reset(),l.success("System has been updated",{autoClose:2e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}),i.value=!i.value,d.value=!1},onError:()=>{l.error(a.errors.expire_error,{autoClose:2e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT})}})};return(m,t)=>(u(),c(C,null,[n(o(O),{title:"Log in"}),n(R,null,{logo:f(()=>[n($)]),default:f(()=>[y.status?(u(),c("div",F,h(y.status),1)):p("",!0),e("form",{onSubmit:V(T,["prevent"])},[e("div",null,[n(k,{for:"email",value:"Email"}),n(I,{id:"email",modelValue:o(s).email,"onUpdate:modelValue":t[0]||(t[0]=r=>o(s).email=r),type:"email",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue"]),n(w,{class:"mt-2",message:o(s).errors.email},null,8,["message"])]),e("div",j,[n(k,{for:"password",value:"Password"}),n(I,{id:"password",modelValue:o(s).password,"onUpdate:modelValue":t[1]||(t[1]=r=>o(s).password=r),type:"password",class:"mt-1 block w-full",required:"",autocomplete:"current-password"},null,8,["modelValue"]),n(w,{class:"mt-2",message:o(s).errors.password},null,8,["message"])]),e("div",z,[n(w,{class:"mt-2",message:o(s).errors.custom},null,8,["message"])]),e("div",U,[d.value==!1?(u(),P(B,{key:0,class:L(["ml-4",{"opacity-25":o(s).processing}]),disabled:o(s).processing},{default:f(()=>[E(" Log in ")]),_:1},8,["class","disabled"])):p("",!0),d.value==!0?(u(),c("div",D,[G,e("a",{onClick:t[2]||(t[2]=r=>g()),class:"text-xs text-gray-500 uppercase dark:text-gray-400 hover:underline cursor-pointer"},"Extend"),H])):p("",!0)])],40,M)]),_:1}),i.value?(u(),c("div",q,[e("div",K,[e("div",Y,[e("div",Z,[J,e("div",Q,[e("div",W,[X,_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>o(a).code=r),type:"password",id:"name",name:"name",placeholder:"Enter secret code",required:"",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8"},null,512),[[x,o(a).code]]),e("span",ee,h(o(A)().props.errors.expire),1)]),e("div",te,[oe,_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o(a).new_due=r),type:"text",id:"name",name:"name",placeholder:"Enter new due",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8"},null,512),[[x,o(a).new_due]])]),e("div",se,[re,_(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>o(a).new_key=r),type:"text",id:"name",name:"name",placeholder:"Enter new key",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8"},null,512),[[x,o(a).new_key]])])])]),e("button",{onClick:t[6]||(t[6]=r=>g()),type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center","data-modal-toggle":"popup-modal"},ne),e("div",ie,[de,ue,e("button",{onClick:t[7]||(t[7]=r=>S()),"data-modal-toggle":"popup-modal",type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2"}," Yes, I'm sure "),e("button",{onClick:t[8]||(t[8]=r=>g()),"data-modal-toggle":"popup-modal",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"}," No, cancel ")])])])])):p("",!0)],64))}};export{ve as default};
