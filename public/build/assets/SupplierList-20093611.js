import{r as k,T as V,d as r,a as e,F as I,g as $,e as x,b as l,t as m,w as d,o as i,f,n as j,u as n,K as y,h as P}from"./app-d0d280cc.js";import{_ as E}from"./logo_main-f6fb4bdb.js";import{_ as Y}from"./Pagination2-95112bd4.js";import{_ as J}from"./DialogModal-a680af93.js";import{_ as W}from"./ConfirmationModal-9ffef64d.js";import{_ as L}from"./SecondaryButton-bd81f153.js";import{_ as T}from"./Button-79acce7e.js";import{_ as w}from"./Icon-af58afcc.js";import{_ as N}from"./Input-37076fa9.js";import{_ as C}from"./InputError-482021fb.js";import{h as M}from"./moment-fbc5633a.js";import{l as c}from"./index-ce89e1d6.js";import"./Modal-2a2543cf.js";const K={class:"container px-4 mx-auto"},X={class:"flex flex-col mt-6"},q={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Q={class:"text-gray-600 p-10"},Z={class:"container px-5 mx-auto"},ee={class:"flex flex-wrap -m-4"},se={class:"bg-gray-50 border border-1 border-yellow-400 shadow-xl p-6 rounded-lg group"},te={class:""},oe={key:0,class:"h-40 rounded max-w- object-fit object-center mb-6 mx-auto",src:E,alt:"user image"},ae=["src","alt"],le={class:"text-lg text-gray-900 font-medium title-font mb-4"},ne={class:"flex mt-4 gap-2"},re={class:"text-sm"},ie={class:"flex mt-1 gap-2"},ce={class:"text-sm"},de={class:"flex mt-1 gap-2"},ue={class:"text-sm"},me={class:"flex mt-1 gap-2"},_e={class:"text-sm"},pe={key:2,class:"text-sm mt-2 flex justify-center w-100 whitespace-nowrap"},fe=["onClick"],ge=["onClick"],he={key:0,class:"mx-auto text-center"},ve=e("p",{class:"text-4xl text-gray-700"},"No Suppliers!",-1),xe=[ve],we={class:"flex items-center justify-between my-6"},be={class:"mt-6 text-sm text-gray-500"},ke=e("p",{class:"text-red-500"}," Clicking can update the system and it may cause a possible error! ",-1),ye=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),Ce={class:"flex-shrink-0"},Se=["src","alt"],Ie={class:"flex-1 min-w-0"},Te={class:"text-sm font-medium text-gray-900 truncate"},Ne={class:"text-sm text-gray-500 truncate"},Oe={class:"grid grid-cols-12 gap-2"},Ve={key:0,class:"col-span-12 mx-auto"},$e=["src"],je=["onClick"],Pe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{class:"text-red-500","stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),Le=e("span",{class:"text-red-500"},"Remove",-1),Me=[Pe,Le],Re=e("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[e("svg",{"aria-hidden":"true",class:"w-8 h-8 mb-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mb-1 text-sm text-gray-500 dark:text-gray-400"},[e("span",{class:"font-semibold"},"Click to upload"),f(" or drag and drop ")]),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," PNG, JPG or JPEG (MAX.1024kb) ")],-1),Ae=e("input",{id:"profile_photo",type:"file",accept:"image/png, image/gif, image/jpeg",class:"hidden"},null,-1),Be=[Re,Ae],Fe={class:"col-span-12"},Ue={class:"col-span-12"},ze={class:"col-span-12"},De=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),ts={__name:"SupplierList",props:["suppliers","search"],setup(R){const h=R,_=k(!1),p=k(!1),g=k(""),u=k([]),v=V({status:null,type:!0}),a=V({supplier_name:"",address:"",mobile_no:"",image:[]}),O=(o,t)=>{v.status=o,g.value=t,_.value=!_.value},A=o=>{u.value=[],u.value.push(o.image),a.supplier_name=o.supplier_name,a.address=o.address,a.mobile_no=o.mobile_no,g.value=o,p.value=!p.value},B=o=>M(o).format("MMMM Do YYYY"),F=o=>M(o).fromNow(),U=()=>{v.put(route("suppliers.update_supplier",{supplier:g.value}),{preserveScroll:!0,onSuccess:()=>{c.success("Supplier successfully updated!",{autoClose:1e3,transition:c.TRANSITIONS.FLIP,position:c.POSITION.TOP_RIGHT}),_.value=!_.value,v.reset(),g.value.reset()},onError:o=>{c.error("Something went wrong "+o,{autoClose:1e3,transition:c.TRANSITIONS.FLIP,position:c.POSITION.TOP_RIGHT})}})},z=()=>{a.post(route("suppliers.update_supplier_details",{supplier:g.value}),{preserveScroll:!0,onSuccess:()=>{c.success("Supplier successfully updated!",{autoClose:1e3,transition:c.TRANSITIONS.FLIP,position:c.POSITION.TOP_RIGHT}),p.value=!p.value,a.reset(),g.value.reset()},onError:o=>{c.error("Something went wrong "+o,{autoClose:1e3,transition:c.TRANSITIONS.FLIP,position:c.POSITION.TOP_RIGHT})}})},D=()=>{let o=document.getElementById("profile_photo");o.click(),o.onchange=t=>{u.value.push(window.URL.createObjectURL(t.target.files[0])),a.image=t.target.files[0]}},G=o=>{o.preventDefault();for(const s of o.dataTransfer.files){var t=URL.createObjectURL(s);u.value.push(t),a.image=s}},H=o=>{u.value.splice(o,1),a.image=null};return(o,t)=>(i(),r(I,null,[e("section",K,[e("div",X,[e("div",q,[e("section",Q,[e("div",Z,[e("div",ee,[(i(!0),r(I,null,$(h.suppliers.data,(s,b)=>(i(),r("div",{key:b,class:"xl:w-1/3 md:w-1/2 p-4"},[e("div",se,[e("div",te,[l(T,{onClick:S=>A(s),class:""},{default:d(()=>[l(w,{icon:"pencil",size:"sm"})]),_:2},1032,["onClick"])]),s.image==null?(i(),r("img",oe)):(i(),r("img",{key:1,class:"h-40 rounded max-w- object-fit object-center mb-6 mx-auto",src:s.image,alt:s.name},null,8,ae)),e("h2",le,m(s.supplier_name),1),e("div",ne,[l(w,{icon:"mobile",size:"sm"}),e("p",re,m(s.mobile_no),1)]),e("div",ie,[l(w,{icon:"location",size:"sm"}),e("p",ce,m(s.address),1)]),e("div",de,[l(w,{icon:"calendar",size:"sm"}),e("p",ue,m(B(s.created_at)),1)]),e("div",me,[l(w,{icon:"clock",size:"sm"}),e("p",_e,m(F(s.updated_at)),1)]),s.type!=0?(i(),r("div",pe,[s.status==0&&s.type!=0?(i(),r("button",{key:0,onClick:S=>O(!0,s),class:"p-2 bg-green-400 rounded-lg hover:bg-green-600"}," Activate ",8,fe)):s.status==1&&s.type!=0?(i(),r("button",{key:1,onClick:S=>O(!1,s),class:"p-2 bg-red-400 rounded-lg hover:bg-red-600"}," Deactivate ",8,ge)):x("",!0)])):x("",!0)])]))),128)),h.suppliers.data.length==0?(i(),r("div",he,xe)):x("",!0)])])])])]),e("div",we,[l(Y,{links:h.suppliers.links,search:h.search},null,8,["links","search"]),e("p",be," Showing "+m(h.suppliers.data.length)+" Suppliers ",1)])]),l(W,{show:_.value,onClose:t[1]||(t[1]=s=>_.value=!1),maxWidth:"2xl"},{title:d(()=>[f(" Are you sure you want to update this supplier status?")]),content:d(()=>[ke]),footer:d(()=>[l(L,{onClick:t[0]||(t[0]=s=>_.value=!1),class:"mr-2"},{default:d(()=>[f(" Cancel ")]),_:1}),l(T,{class:j([{"opacity-25":n(v).processing},"bg-green-200 hover:bg-green-400"]),disabled:n(v).processing,onClick:U},{default:d(()=>[ye,f(" Submit ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(J,{show:p.value,onClose:t[8]||(t[8]=s=>p.value=!1),maxWidth:"2xl"},{title:d(()=>[f(" Update Supplier ")]),content:d(()=>[e("div",Ce,[e("img",{class:"w-10 h-10 rounded-full",src:n(y)().props.auth.user.profile_photo_url,alt:n(y)().props.auth.user.name},null,8,Se)]),e("div",Ie,[e("p",Te,m(n(y)().props.auth.user.name),1),e("p",Ne,m(n(y)().props.auth.user.email),1)]),e("div",Oe,[u.value.length!=0?(i(),r("div",Ve,[(i(!0),r(I,null,$(u.value,(s,b)=>(i(),r("div",{key:b,class:"flex-shrink-0"},[e("img",{class:"w-16 h-16 rounded-full",src:s},null,8,$e),e("button",{onClick:S=>H(b),class:"flex text-gray-400 hover:text-gray-600"},Me,8,je)]))),128))])):x("",!0),u.value.length!=1?(i(),r("div",{key:1,class:"col-span-12",onDragover:t[2]||(t[2]=P(()=>{},["prevent"])),onDrop:t[3]||(t[3]=P(()=>{},["prevent"]))},[e("label",{onDrop:G,onClick:D,for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-20 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},Be,32)],32)):x("",!0),l(C,{message:n(a).errors.image,class:"mt-2 col-span-12"},null,8,["message"]),e("div",Fe,[l(N,{label:"Supplier's name",type:"text",class:"mt-1 block w-full",modelValue:n(a).supplier_name,"onUpdate:modelValue":t[4]||(t[4]=s=>n(a).supplier_name=s),autofocus:""},null,8,["modelValue"]),l(C,{message:n(a).errors.supplier_name,class:"mt-2"},null,8,["message"])]),e("div",Ue,[l(N,{label:"Contact No",type:"text",class:"block w-full",modelValue:n(a).mobile_no,"onUpdate:modelValue":t[5]||(t[5]=s=>n(a).mobile_no=s),autofocus:""},null,8,["modelValue"]),l(C,{message:n(a).errors.mobile_no,class:"mt-2"},null,8,["message"])]),e("div",ze,[l(N,{label:"Supplier's Address",type:"text",class:"block w-full",modelValue:n(a).address,"onUpdate:modelValue":t[6]||(t[6]=s=>n(a).address=s),autofocus:""},null,8,["modelValue"]),l(C,{message:n(a).errors.address,class:"mt-2"},null,8,["message"])])])]),footer:d(()=>[l(L,{onClick:t[7]||(t[7]=s=>p.value=!1),class:"mr-2"},{default:d(()=>[f(" Cancel ")]),_:1}),l(T,{class:j([{"opacity-25":n(a).processing},"bg-yellow-200 hover:bg-yellow-400"]),disabled:n(a).processing,onClick:z},{default:d(()=>[De,f(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{ts as default};
