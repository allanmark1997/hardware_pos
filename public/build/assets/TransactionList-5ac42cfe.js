import{r as y,z as S,d as u,a as e,b as _,q as k,e as U,F as v,g as V,n as $,t as r,f,O as C,o as i}from"./app-7f390f71.js";import{_ as j}from"./Icon-9324afd6.js";import{_ as D}from"./TextInput-4e29b1d4.js";import{_ as N}from"./Input-51ffcca1.js";import{h as Y}from"./moment-fbc5633a.js";import"./index-6dabe31e.js";const B={class:"flex justify-between mt-2"},E={class:"flex gap-2"},H={class:"flex gap-2"},L={class:"flex"},O=e("span",{class:"text-md mt-2 mr-2"},"From",-1),A={class:"flex"},G=e("span",{class:"text-md mt-2 mr-2"},"To",-1),J={class:"flex"},Q={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},R={class:"container mx-auto"},W={class:"relative overflow-x-auto"},X={class:"w-full text-sm text-left text-gray-500"},Z=e("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Transaction ID"),e("th",{scope:"col",class:"px-6 py-3"},"Products")])],-1),ee={class:"px-6 py-4"},te={scope:"row",class:"px-2 py-1 text-gray-900 whitespace-nowrap"},se={class:"w-full text-xs text-left text-gray-500"},le=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-1 py-1 flex"},"Product"),e("th",{scope:"col",class:"px-1 py-1"},"No."),e("th",{scope:"col",class:"px-1 py-1"},"Price"),e("th",{scope:"col",class:"px-1 py-1"},"Discount %"),e("th",{scope:"col",class:"px-1 py-1"},"Total Discount"),e("th",{scope:"col",class:"px-1 py-1"},"Sub-total"),e("th",{scope:"col",class:"px-1 py-1"},"Created Date")])],-1),oe={class:"px-1 py-1 flex"},ae={class:"px-1 py-1"},ne={class:"px-1 py-1"},re={class:"px-1 py-1"},ce={class:"px-1 py-1"},ue={class:"px-1 py-1"},ie={class:"px-1 py-1"},de={class:"flex items-center justify-between"},pe={class:"w-full"},_e={class:"inline-flex -space-x-px text-sm"},xe=["disabled"],me=["onClick"],ge=["onClick"],ye=["disabled"],he={class:"mt-6 text-sm text-gray-500 flex justify-between gap-4"},ve={class:"text-sm text-gray-700 flex mt-4"},fe={class:"text-sm text-gray-700 mt-4"},be={class:"font-semibold text-gray-900"},we={class:"font-semibold text-gray-900"},De={__name:"TransactionList",props:["transactions","date_from","date_to","search"],setup(K){const c=K,x=y(c.date_from),m=y(c.date_to),g=y(c.search),o=y({}),d=y(10);function p(a,n,l){var n=n||1,l=l||10,w=(n-1)*l,h=a.slice(w).slice(0,l),P=Math.ceil(a.length/l);return{page:n,per_page:l,prev_page:n-1?n-1:null,next_page:P>n?n+1:null,total:a.length,total_pages:P,data:h}}console.log(c.transactions),S(()=>{o.value=p(c.transactions,1,d.value),console.log(o.value)});const T=a=>Y(a).format("MM/DD/YYYY, h:mm:ss a"),b=a=>{const s=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return s.format(a),s.format(a)},q=()=>{C.get(route("return.index",{search:g.value,date_from:x.value,date_to:m.value}))},z=()=>{C.get(route("return.index",{search:g.value,date_from:x.value,date_to:m.value}))},F=()=>{C.get(route("return.index",{date_from:null,date_to:null,search:null}))},I=a=>{let s=0,t=a.sale_discount.discount/100;for(let n=0;n<a.quantity;n++)s+=a.price.price*t;return s},M=a=>{let s=0,t=0,n=a.sale_discount.discount/100;for(let l=0;l<a.quantity;l++)t=a.price.price*n,s+=a.price.price-t;return s};return(a,s)=>(i(),u(v,null,[e("div",B,[e("div",E,[e("div",H,[e("div",L,[O,_(D,{id:"date_from",modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),e("div",A,[G,_(D,{id:"date_to",modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t),type:"date",class:"mt-1 block w-full",onKeyup:k(q,["enter"])},null,8,["modelValue","onKeyup"])]),e("div",J,[_(N,{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=t=>g.value=t),class:"rounded-lg w-[30vmin]",type:"text",label:"Search transaction",onKeyup:k(z,["enter"])},null,8,["modelValue","onKeyup"])]),x.value||m.value||g.value?(i(),u("button",{key:0,class:"h-10 my-auto mt-5",onClick:F},[_(j,{icon:"close_icon",size:"sm"})])):U("",!0)])])]),e("section",Q,[e("div",R,[e("div",W,[e("table",X,[Z,e("tbody",null,[(i(!0),u(v,null,V(o.value.data,(t,n)=>(i(),u("tr",{key:n,class:"bg-white border-"},[e("td",ee,r(t.transaction_id),1),e("td",te,[e("table",se,[le,e("tbody",null,[(i(!0),u(v,null,V(t.data,(l,w)=>{var h;return i(),u("tr",{key:w,class:"bg-white border-"},[e("td",oe,[_(j,{icon:"shopping_cart",size:"xs"}),f(" "+r((h=l.product)==null?void 0:h.name),1)]),e("td",ae,r(l.quantity),1),e("td",ne,r(b(l.price.price)),1),e("td",re,r(l.sale_discount.discount)+"% ",1),e("td",ce,[e("small",null,r(b(I(l))),1)]),e("td",ue,[e("small",null,r(b(M(l))),1)]),e("td",ie,[e("small",null,r(T(l.created_at)),1)])])}),128))])])])]))),128))])])]),e("div",de,[e("nav",pe,[e("ul",_e,[e("li",null,[e("button",{onClick:s[3]||(s[3]=t=>o.value=p(c.transactions,o.value.prev_page,1)),class:$(["flex items-center justify-center px-3 h-8 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700",o.value.prev_page==null?"cursor-not-allowed text-gray-100":""]),disabled:o.value.prev_page==null}," Previous ",10,xe)]),(i(),u(v,null,V(10,(t,n)=>e("li",{key:n},[o.value.page!=t?(i(),u("a",{key:0,href:"#",onClick:l=>o.value=p(c.transactions,t,d.value),class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700"},r(t),9,me)):(i(),u("a",{key:1,href:"#",onClick:l=>o.value=p(c.transactions,t,d.value),class:"flex items-center justify-center px-3 h-8 text-blue-600 border border-gray-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700"},r(t),9,ge))])),64)),e("li",null,[e("button",{onClick:s[4]||(s[4]=t=>o.value=p(c.transactions,o.value.next_page,d.value)),disabled:o.value.next_page==null,class:$(["flex items-center justify-center px-3 h-8 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700",o.value.next_page==null?"cursor-not-allowed text-gray-100":""])}," Next ",10,ye)])])]),e("p",he,[_(N,{type:"number",label:"Input showing",modelValue:d.value,"onUpdate:modelValue":s[5]||(s[5]=t=>d.value=t),onKeyup:s[6]||(s[6]=k(t=>o.value=p(c.transactions,1,d.value),["enter"]))},null,8,["modelValue"]),e("span",ve," Page: "+r(o.value.page),1),e("span",fe,[f(" Showing "),e("span",be,r(o.value.per_page),1),f(" of "),e("span",we,r(o.value.total),1),f(" Entries ")])])])])])],64))}};export{De as default};
