import{r as m,d as l,a as e,b as a,s as C,e as T,F as k,g as $,t as o,w as v,O as D,o as c,f as n}from"./app-dc0ae154.js";import{_ as d}from"./Icon-47a9c60e.js";import{_ as Y}from"./Pagination2-0704fa56.js";import{_ as z}from"./TextInput-6c522527.js";import{_ as q}from"./Input-1462abb2.js";import{_ as E}from"./DialogModal-61d47a6f.js";import{h as I}from"./moment-fbc5633a.js";import"./index-73c8e731.js";import{_ as B}from"./SecondaryButton-65f8f604.js";import"./Modal-9ae58296.js";const H={class:"flex justify-between mt-2"},L={class:"flex gap-2"},M={class:"flex gap-2"},O={class:"flex"},Q=e("span",{class:"text-md mt-2 mr-2"},"From",-1),R={class:"flex"},W=e("span",{class:"text-md mt-2 mr-2"},"To",-1),A={class:"flex"},G=["href"],J={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},X={class:"container mx-auto"},Z={class:"relative overflow-x-auto"},ee={class:"w-full text-sm text-left text-gray-500"},te=e("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Delivery ID"),e("th",{scope:"col",class:"px-6 py-3"},"Supplier ID"),e("th",{scope:"col",class:"px-6 py-3"},"Supplier name"),e("th",{scope:"col",class:"px-6 py-3"},"Receive by"),e("th",{scope:"col",class:"px-6 py-3"},"Status"),e("th",{scope:"col",class:"px-6 py-3"},"Total Success"),e("th",{scope:"col",class:"px-6 py-3"},"Total Unsuccess"),e("th",{scope:"col",class:"px-6 py-3"},"Created at")])],-1),se=["onClick"],oe={class:"px-6 py-4"},ae={class:"px-6 py-4"},le={class:"px-6 py-4"},ce=["src","alt"],ie={class:"px-6 py-4"},ne=["src","alt"],re={class:"px-6 py-4"},pe={key:0,class:"bg-green-400 rounded-md p-1 text-white flex"},de={key:1,class:"bg-red-400 rounded-md p-1 text-white flex"},ue={class:"px-6 py-4"},_e={class:"px-6 py-4"},me={class:"px-6 py-4 flex gap-2"},he={class:"flex items-center justify-between"},xe={class:"mt-6 text-sm text-gray-500"},fe={class:"text-gray-600 truncate"},ge={class:"w-full text-xs text-left text-gray-500"},ye=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-1 py-1"},"Delivery details ID"),e("th",{scope:"col",class:"px-1 py-1"},"Product"),e("th",{scope:"col",class:"px-1 py-1"},"QTY"),e("th",{scope:"col",class:"px-1 py-1"},"Price"),e("th",{scope:"col",class:"px-1 py-1"},"Status"),e("th",{scope:"col",class:"px-1 py-1"},"Sub-total")])],-1),ve={class:"px-1 py-1"},be={class:"px-1 py-1 flex pt-2 font-bold"},we={class:"w-[20vmin] break-words"},ke={class:"px-1 py-1"},De={class:"px-1 py-1"},Se={class:"px-1 py-1"},Ve={key:0,class:"bg-green-400 rounded-md p-1 text-white flex gap-1"},Ce={key:1,class:"bg-red-400 rounded-md p-1 text-white flex gap-1"},$e={class:"px-1 py-1"},Ie={__name:"DeliveryList",props:["deliveries","date_from","date_to","search"],setup(b){const x=b,r=m(x.date_from),p=m(x.date_to),h=m(x.search),f=m(!1),S=m(),V=m(),F=i=>I(i).format("MM/DD/YYYY, h:mm:ss a"),g=i=>{let u=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:20,minimumSignificantDigits:1,maximumSignificantDigits:20}).format(i).split("."),w=String(u[1]).slice(0,2),y=w=="un"?"00":w;return String(u[0])+"."+y},P=()=>{D.get(route("deliveries.index",{date_from:r.value,date_to:p.value}))},U=()=>{D.get(route("deliveries.index",{search:h.value,date_from:r.value,date_to:p.value}))},j=()=>{D.get(route("deliveries.index",{date_from:null,date_to:null,search:null}))},K=i=>{let s=0;return i.forEach(t=>{t.status==1&&(s+=t.quantity*t.price.price)}),s},N=i=>{let s=0;return i.forEach(t=>{t.status==0&&(s+=t.quantity*t.price.price)}),s};return(i,s)=>(c(),l(k,null,[e("div",H,[e("div",L,[e("div",M,[e("div",O,[Q,a(z,{id:"date_from",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),e("div",R,[W,a(z,{id:"date_to",modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=t=>p.value=t),type:"date",class:"mt-1 block w-full",onKeyup:C(P,["enter"])},null,8,["modelValue","onKeyup"])]),e("div",A,[a(q,{modelValue:h.value,"onUpdate:modelValue":s[2]||(s[2]=t=>h.value=t),class:"rounded-lg w-[30vmin]",type:"text",label:"Search supplier name",onKeyup:C(U,["enter"])},null,8,["modelValue","onKeyup"])]),r.value||p.value||h.value?(c(),l("button",{key:0,class:"h-10 my-auto mt-5",onClick:j},[a(d,{icon:"close_icon",size:"sm"})])):T("",!0)])]),e("a",{href:i.route("deliveries.export",{date_from:r.value,date_to:p.value}),class:"bg-green-400 hover:bg-green-600 hover:text-white rounded-lg my-auto p-2"},"Export Delivery",8,G)]),e("section",J,[e("div",X,[e("div",Z,[e("table",ee,[te,e("tbody",null,[(c(!0),l(k,null,$(b.deliveries.data,(t,u)=>{var _;return c(),l("tr",{key:u,class:"bg-white hover:bg-gray-100 cursor-pointer",onClick:w=>{var y;return f.value=!0,S.value=t.details,V.value=(y=t.supplier)==null?void 0:y.supplier_name}},[e("td",oe,o(t.id),1),e("td",ae,o(t.supplier.id),1),e("td",le,[e("img",{class:"h-8 w-8 rounded-full object-cover",src:t.supplier.image,alt:t.supplier.supplier_name},null,8,ce),n(" "+o(t.supplier.supplier_name),1)]),e("td",ie,[e("img",{class:"h-8 w-8 rounded-full object-cover",src:t.user_receiver.profile_photo_url,alt:t.user_receiver.supplier_name},null,8,ne),n(" "+o(((_=t.user_receiver)==null?void 0:_.name)??"Pending"),1)]),e("td",re,[t.status==1?(c(),l("span",pe,[a(d,{icon:"check",size:"sm"}),n(" Success ")])):(c(),l("span",de,[a(d,{icon:"wrong",size:"sm"}),n(" Unuccess ")]))]),e("td",ue,o(g(K(t.details))),1),e("td",_e,o(g(N(t.details))),1),e("td",me,[a(d,{icon:"calendar",size:"md"}),n(" "+o(F(t.created_at)),1)])],8,se)}),128))])])]),e("div",he,[a(Y,{links:x.deliveries.links,date_from:r.value,date_to:p.value,search:h.value},null,8,["links","date_from","date_to","search"]),e("p",xe," Showing "+o(b.deliveries.data.length)+" Deliveries ",1)])])]),a(E,{show:f.value,maxWidth:"2xl",onClose:s[4]||(s[4]=t=>f.value=!1)},{title:v(()=>[e("span",fe," Delivery details for ("+o(V.value)+")",1)]),content:v(()=>[e("table",ge,[ye,e("tbody",null,[(c(!0),l(k,null,$(S.value,(t,u)=>{var _;return c(),l("tr",{key:u,class:"bg-white border-"},[e("td",ve,o(t.id),1),e("td",be,[a(d,{icon:"shopping_cart",size:"xs"}),e("p",we,o((_=t.product)==null?void 0:_.name),1)]),e("td",ke,o(t.quantity),1),e("td",De,o(g(t.price.price)),1),e("td",Se,[t.status==1?(c(),l("small",Ve,[a(d,{icon:"check",size:"sm"}),n(" Success ")])):(c(),l("small",Ce,[a(d,{icon:"wrong",size:"xs"}),n(" Unsuccess ")]))]),e("td",$e,[e("small",null,o(g(t.quantity*t.price.price)),1)])])}),128))])])]),footer:v(()=>[a(B,{class:"mr-2 bg-red-300",onClick:s[3]||(s[3]=t=>f.value=!1)},{default:v(()=>[n(" Close ")]),_:1})]),_:1},8,["show"])],64))}};export{Ie as default};
