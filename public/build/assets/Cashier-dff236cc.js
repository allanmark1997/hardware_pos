import{r as m,y as z,o as u,d as c,a as e,k as B,x as V,F as L,g as F,f as C,t as s,e as D,s as ee,T as ne,O as p,q as re,b as P,u as y,w as A,Z as ie,p as de,n as Z,K as ue}from"./app-2f54e3ea.js";import{_ as H}from"./Icon-b88412fa.js";import{_ as W}from"./ConfirmationModal-8078f90e.js";import{_ as Q}from"./SecondaryButton-194cb57d.js";import{_ as J}from"./Button-af8759b8.js";import{h as X}from"./moment-fbc5633a.js";import{l}from"./index-d6344bfc.js";import"./Modal-24022f87.js";const ce={key:0,id:"defaultModal",tabindex:"-1","aria-hidden":"true",class:"fixed top-0 left-0 right-0 backdrop-blur-sm z-50 pt-52 flex justify-center item-center w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"},pe={class:"relative w-full max-w-3xl max-h-full"},me={class:"relative bg-white rounded-lg shadow"},he=e("div",{class:"flex items-start justify-between p-4 border-b rounded-t"},[e("h3",{class:"text-xl font-semibold text-gray-900"}," Look Up ")],-1),_e={class:"p-6 space-y-6"},fe={class:"max-h-md"},ve={key:0,role:"status",class:"space-y-8 animate-pulse md:space-y-0 md:space-x-8 md:flex md:items-center"},ge=ee('<div class="flex items-center justify-center w-full h-48 bg-gray-300 rounded sm:w-96"><svg class="w-10 h-10 text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 18"><path d="M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"></path></svg></div><div class="w-full"><div class="h-2.5 bg-gray-200 rounded-full w-48 mb-4"></div><div class="h-2 bg-gray-200 rounded-full max-w-[480px] mb-2.5"></div><div class="h-2 bg-gray-200 rounded-full mb-2.5"></div><div class="h-2 bg-gray-200 rounded-full max-w-[440px] mb-2.5"></div><div class="h-2 bg-gray-200 rounded-full max-w-[460px] mb-2.5"></div><div class="h-2 bg-gray-200 rounded-full max-w-[360px]"></div></div><span class="sr-only">Loading...</span>',3),xe=[ge],be={key:1,role:"status",class:"space-y-1 md:space-y-0 md:space-x-1 md:flex md:items-center"},ye=["onClick"],we=["src"],Ce=e("br",null,null,-1),ke={class:"flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b"},Te={key:0,role:"status",class:"space-y-8 animate-pulse md:space-y-0 md:space-x-8 md:flex md:items-center"},Ie=ee('<div class="flex items-center justify-center w-full h-48 bg-gray-300 rounded sm:w-96"><svg class="w-10 h-10 text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 18"><path d="M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"></path></svg></div><div class="w-full"><div class="h-2.5 bg-gray-200 rounded-full w-48 mb-4"></div><div class="h-2 bg-gray-200 rounded-full max-w-[480px] mb-2.5"></div><div class="h-2 bg-gray-200 rounded-full mb-2.5"></div><div class="h-2 bg-gray-200 rounded-full max-w-[440px] mb-2.5"></div><div class="h-2 bg-gray-200 rounded-full max-w-[460px] mb-2.5"></div><div class="h-2 bg-gray-200 rounded-full max-w-[360px]"></div></div><span class="sr-only">Loading...</span>',3),Pe=[Ie],Se={key:1,class:"flex flex-col justify-center"},$e={class:"relative flex flex-col md:flex-row md:space-x-5 space-y-3 md:space-y-0 rounded-xl shadow-lg p-3 max-w-xs md:max-w-3xl mx-auto border border-white bg-white"},Ne={class:"w-full md:w-1/3 bg-white grid place-items-center"},Oe=["src"],Ae={class:"w-full md:w-2/3 bg-white flex flex-col space-y-2 p-3"},Re={class:"flex justify-between item-center"},Le={class:"text-gray-500 font-medium hidden md:block"},De={class:"flex gap-1"},je={class:"bg-red-500 px-3 py-1 rounded-full text-xs font-medium text-white"},Fe={class:"font-black text-gray-800 md:text-3xl text-xl"},Me={class:"md:text-lg text-gray-500 text-base"},Ke=e("p",{class:"md:text-lg text-gray-500 text-base"},[e("strong",null,"Details:")],-1),He={class:"md:text-lg text-gray-500 text-base"},Be={class:"md:text-lg text-orange-800 text-base"},Ve={class:"text-xl flex justify-end font-black text-gray-800"},qe={__name:"SKU",props:["SKULookup","products"],setup(f){const T=f,v=m("");m([{name:"AF1",imgSrc:"https://th.bing.com/th/id/OIP.gskj3fuAc3TMy9_NLV4-swHaJ4?pid=ImgDet&rs=1",price:2e3},{name:"kobe IV",imgSrc:"https://th.bing.com/th/id/R.c0b464ee5bf466b0774fd958cd49d671?rik=4BKsxct35mNq%2fg&riu=http%3a%2f%2fcontents.spin.ph%2fimage%2fresize%2fimage%2f2019%2f02%2f23%2fnike-kobe-iv-protro-1550916244.webp&ehk=HWW%2b6sYFBuz%2fZMO%2b2yAwK5n%2fujbgm5fG%2fEBuFgcVPyU%3d&risl=&pid=ImgRaw&r=0",price:3e3},{name:"SB freedy",imgSrc:"https://th.bing.com/th/id/OIP.PpVn4AnJf178qD-1dZGs5AHaEc?pid=ImgDet&rs=1",price:2300},{name:"J1 blacktoe",imgSrc:"https://sneakernews.com/wp-content/uploads/2019/02/air-jordan-1-low-black-toe-553558-116-2.jpg",price:2023}]);const r=m({name:"",imgSrc:"",price:null}),k=x=>{r.value=x,console.log(r.value)};return z(()=>{r.value=""}),(x,_)=>T.SKULookup?(u(),c("div",ce,[e("div",pe,[e("div",me,[he,e("div",_e,[B(e("input",{type:"text","onUpdate:modelValue":_[0]||(_[0]=g=>v.value=g),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"SKU Lookup"},null,512),[[V,v.value]]),e("div",fe,[v.value?(u(),c("div",be,[(u(!0),c(L,null,F(T.products,g=>(u(),c("div",null,[g.name.toLocaleLowerCase().includes(v.value.toLocaleLowerCase())?(u(),c("button",{key:0,type:"button",onClick:S=>k(g),class:"inline-flex items-center px-1 py-1 text-sm font-medium text-center text-white bg-orange-700 rounded-lg hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300"},[e("img",{src:g.product_image,class:"max-w-2xl w-10 rounded-lg mr-2 object-contain max-h-auto h-10"},null,8,we),C(" "+s(g.name),1),Ce,C("₱ "+s(g.current_price.price),1)],8,ye)):D("",!0)]))),256))])):(u(),c("div",ve,xe))])]),e("div",ke,[r.value.name?(u(),c("div",Se,[e("div",$e,[e("div",Ne,[e("img",{src:r.value.product_image,alt:"tailwind logo",class:"rounded-xl"},null,8,Oe)]),e("div",Ae,[e("div",Re,[e("p",Le,"Stocks: "+s(r.value.quantity),1),e("div",De,[e("div",je,s(r.value.current_discount.discount)+"% Discount",1)])]),e("h3",Fe,s(r.value.name),1),e("p",Me,[e("strong",null,"Barcode:"+s(r.value.barcode),1)]),Ke,e("p",He,s(r.value.description.details),1),e("p",Be,[e("strong",null,s(r.value.description.specification.spec_title),1)]),(u(!0),c(L,null,F(r.value.description.specification.spec_details,g=>(u(),c("p",null,[e("strong",null,s(g.spec_name)+": ",1),C(" "+s(g.spec_details),1)]))),256)),e("div",Ve," ₱ "+s(r.value.current_price.price),1)])])])):(u(),c("div",Te,Pe))])])])])):D("",!0)}};const ze={key:0,id:"defaultModal",tabindex:"-1","aria-hidden":"true",class:"fixed top-0 left-0 right-0 backdrop-blur-sm z-50 flex justify-center item-center w-full p-4 overflow-x-hidden overflow-y-auto h-[calc(100%-1rem)]"},Ee={class:"text-justify overflow-auto p-3 relative"},Ge={id:"toPrint",class:"text-justify overflow-auto p-3 relative border bg-white flex-wrap"},Ue={class:""},Ye=e("thead",null,[e("tr",{class:"border mb-2"},[e("th",null,[e("small",null,"CRISBODS HARDWARE AND CONSTRUCTION SUPPLY")])]),e("tr",{class:"border mb-2"},[e("th",null,[e("small",{style:{"font-size":"10px"}},"Dologon, Busco, Quezon Rd., Maramag, Bukidnon, 8714")])])],-1),Ze={class:"border"},We=e("tr",null,[e("td",null,[e("small",null,"TIN: 487-279-975-00001")])],-1),Qe=e("tr",null,[e("td",null,[e("small",{style:{"font-size":"10px"}},"*************************************")])],-1),Je=e("tr",null,[e("td",null,[e("small",null,"Customer Name:"),e("small",null,"Samsmallle Customer name ")])],-1),Xe=e("tr",null,[e("td",null,[e("small",null,"Customer Address:"),e("small",null,"Purok-2, Poblacion, Malaybalay City, Bukidnon ")])],-1),et=e("tr",null,[e("td",null,[e("small",{style:{"font-size":"10px"}},"*************************************")])],-1),tt=e("br",null,null,-1),st={class:""},ot=e("thead",null,[e("tr",{class:"border mb-2"},[e("th",null,[e("small",null,"Retail ")]),e("th",null,[e("small",null,"UPRICE ")]),e("th",null,[e("small",null,"QTY ")]),e("th",null,[e("small",null,"TOTAL ")])])],-1),lt={class:"border"},at={id:"totalPrice"},nt={class:"border"},rt=e("td",null,[e("small",null," --- ")],-1),it=e("td",null,[e("small",null,"---")],-1),dt={class:""},ut={class:"border"},ct=e("tr",null,[e("td",null,[e("small",{style:{"font-size":"10px"}},"*************************************")])],-1),pt=e("tr",null,[e("td",null,[e("small",{style:{"font-size":"10px"}},"*************************************")])],-1),mt={class:""},ht={class:"border mb-2"},_t={class:"border mb-2"},ft={class:"border mb-2"},vt={class:"border"},gt=e("tr",null,[e("td",null,[e("small",{style:{"font-size":"10px"}},"*************************************")])],-1),xt=e("tr",null,[e("td",null,[e("small",null," This serve as an OFFICIAL RECEIPT "),e("small",null,"Thank You, Come Again")])],-1),bt=["jsbarcode-value"],yt=e("tr",null,[e("td",null,[e("small",{style:{"font-size":"10px"}},"*************************************")])],-1),wt={class:"flex justify-center mt-3"},Ct={__name:"RECIEPT",props:["printModal","products","cashierName","cash__","grand_total","vat__","spDiscount","subtotal__","subtotal1__"],emits:["checkout__","close_modal"],setup(f,{emit:T}){const v=f,r=m(Date.now()),k=()=>{var i=document.createElement("iframe");i.style.display="none",document.body.appendChild(i);var h=document.getElementById("toPrint").cloneNode(!0),d=i.contentWindow.document;d.open(),d.appendChild(h),d.close(),i.contentWindow.print(),document.body.removeChild(i)},x=()=>{T("close_modal")},_=()=>{k(),T("checkout__")},g=i=>{const h=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return h.format(i),h.format(i)},S=(i,h)=>{let d=parseFloat(h.replace(/[^\d.]/g,"")),o=parseFloat(i.replace(/[^\d.]/g,""));return d-o},O=()=>X(r).format("MM/DD/YYYY"),I=()=>X(r).format("h:mm:ss a"),R=(i,h)=>{if(h<0||h>100)return i;const d=i-i*(h/100);return{...i,discountedPrice:d.toFixed(2)}},w=(i,h)=>{const d="…";var o,M;return i.length<=h?i:(o=Math.ceil(h/2),M=i.length-Math.floor(h/2)+1,i.substr(0,o)+d+i.substring(M))};return z(()=>{JsBarcode(".barcode").init()}),(i,h)=>f.printModal?(u(),c("div",ze,[e("div",Ee,[e("div",Ge,[e("table",Ue,[Ye,e("tbody",Ze,[We,e("tr",null,[e("td",null,[e("small",null,"Date: "+s(O()),1)])]),e("tr",null,[e("td",null,[e("small",null,"Time:"+s(I()),1)])]),e("tr",null,[e("td",null,[e("small",null,"Cashier: "+s(f.cashierName),1)])]),Qe,Je,Xe,et])]),tt,e("table",st,[ot,e("tbody",lt,[(u(!0),c(L,null,F(v.products,(d,o)=>(u(),c("tr",{key:o},[e("td",null,[e("small",null,s(w(d.name,18)),1)]),e("td",null,[e("small",null,s(g(R(d.current_price.price,d.current_discount.discount).discountedPrice)),1)]),e("td",null,[e("small",null,s(d.cashier_quantity),1)]),e("td",null,[e("small",at,s(g(R(d.current_price.price,d.current_discount.discount).discountedPrice*d.cashier_quantity)),1)])]))),128))]),e("tfoot",nt,[e("tr",null,[e("td",null,[e("small",null,s(v.products.length),1)]),rt,it,e("td",null,[e("small",null,s(v.grand_total),1)])])])]),e("table",dt,[e("tbody",ut,[ct,e("tr",null,[e("td",null,[e("small",null," Subtotal (Excluding VAT): "+s(v.subtotal__),1),e("small",null,"Subtotal Amount: "+s(v.subtotal1__),1),e("small",null,"VAT ("+s(v.vat__)+"%):"+s(v.vat__)+"%",1),e("small",null,"Special Discount("+s(v.spDiscount)+"%)",1)])]),pt])]),e("table",mt,[e("thead",null,[e("tr",ht,[e("th",null,[e("small",null,"TOTAL AMOUNT: "+s(v.grand_total),1)])]),e("tr",_t,[e("th",null,[e("small",null,"CASH: "+s(v.cash__),1)])]),e("tr",ft,[e("th",null,[e("small",null,"CHANGE: "+s(g(S(v.grand_total,v.cash__))),1)])])]),e("tbody",vt,[gt,xt,e("tr",null,[e("td",null,[(u(),c("svg",{class:"barcode w-[20vmin] h-[10vmin] mx-auto","jsbarcode-format":"CODE128","jsbarcode-value":r.value,"jsbarcode-textmargin":"0","jsbarcode-fontoptions":"bold"},null,8,bt))])]),yt])])]),e("div",wt,[e("button",{id:"printButton",type:"button",onClick:h[0]||(h[0]=d=>_()),class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2"}," Print "),e("button",{type:"button",onClick:h[1]||(h[1]=d=>x()),class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2"}," Close ")])])])):D("",!0)}},kt={class:"py-5"},Tt={class:"fixed m-[50%] z-[-1000]"},It={class:"flex max-w-7xl mx-auto justify-end"},Pt={class:"flex max-w-7xl mx-auto justify-end"},St={class:"px-2 py-1.5 text-2xl font-semibold text-white bg-yellow-700 border rounded-lg"},$t={class:"max-w-7xl mx-auto bg-white rounded mt-5 px-1"},Nt={class:"grid grid-cols-12 gap-2"},Ot={class:"col-span-7 p-5"},At={class:"product_list bg-gray-50 p-1 rounded-lg mt-3 min-h-[60vmin] overflow-auto"},Rt={class:"mt-24 flex max-w-lg mx-auto max-h-lg justify-center"},Lt=["src"],Dt={class:"col-span-5"},jt={class:"bg-white rounded-b-xl shadow-md p-5 flex justify-between max-h-[63vmin]"},Ft={class:"flex"},Mt=e("span",{class:"font-bold"},"Cart",-1),Kt={key:0},Ht={class:"italic ml-1 text-white flex bg-red-600 p-1 rounded-lg"},Bt=e("span",{class:"font-bold"}," Items: ",-1),Vt={class:"bg-red-500 ml-1 px-2 text-white rounded-xl w-10 text-center"},qt={class:"relative mt-5 px-2 overflow-x-auto min-h-[45vmin] shadow-md"},zt={class:"w-full text-sm text-left text-gray-500"},Et={class:"bg-white border-b"},Gt=e("td",{class:"px-6 py-4 font-semibold text-gray-900"},"Wrench",-1),Ut=e("td",{class:"px-6 py-4"},[e("div",{class:"flex items-center space-x-3"},[e("div",null,[e("div",{class:"flex items-center space-x-3"},[e("button",{class:"inline-flex items-center justify-center p-1 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200",type:"button"},[e("span",{class:"sr-only"},"Quantity button"),e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M1 1h16"})])]),e("div",null,[e("input",{type:"number",id:"first_product",class:"bg-gray-50 w-14 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block px-2.5 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"1",required:""})]),e("button",{class:"inline-flex items-center justify-center h-6 w-6 p-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200",type:"button"},[e("span",{class:"sr-only"},"Quantity button"),e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 1v16M1 9h16"})])])])])])],-1),Yt=e("td",{class:"px-6 py-4 font-semibold text-gray-900"},null,-1),Zt={class:"px-6 py-4 font-semibold text-gray-900"},Wt={key:0,class:"mx-auto text-center text-xs"},Qt={key:1,class:"w-full"},Jt={class:"flow-root max-h-[50vmin] overflow-auto p-2",id:"addedCartScrll"},Xt={role:"addedlist",class:"divide-y divide-gray-200"},es={class:"py-3 sm:py-4"},ts={class:"flex items-center space-x-4"},ss={class:"flex-shrink-0"},os=["src"],ls={class:"flex-1 min-w-0"},as={class:"text-sm font-medium text-gray-900 truncate"},ns={class:"inline-flex items-center text-base font-semibold text-gray-900"},rs={class:"inline-flex items-center text-base font-semibold text-gray-900"},is={class:"inline-flex items-center text-base font-semibold text-gray-900"},ds={class:"item-center p-5"},us={class:"font-bold"},cs={class:"font-bold"},ps=e("span",{class:"font-bold"},"Sub-Total (Excluding VAT):",-1),ms=e("span",{class:"font-bold"},"Sub-Total:",-1),hs=e("span",{class:"font-bold"},"Grand Total:",-1),_s={class:"justify-end flex"},fs={key:0,id:"defaultModal",tabindex:"-1","aria-hidden":"true",class:"fixed top-0 left-0 right-0 backdrop-blur-sm z-50 pt-52 flex justify-center item-center w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"},vs={class:"relative w-full max-w-2xl max-h-full"},gs={class:"relative bg-white rounded-lg shadow"},xs={class:"flex items-start justify-between p-4 border-b rounded-t"},bs=e("h3",{class:"text-xl font-semibold text-gray-900"},"Delete All?",-1),ys=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),ws=e("span",{class:"sr-only"},"Close modal",-1),Cs=[ys,ws],ks=e("div",{class:"p-6 space-y-6"},[e("p",{class:"text-base leading-relaxed text-gray-500"}," Are you sure you want to delete all transactions? ")],-1),Ts={class:"flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b"},Is=["onKeyup"],Ps=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),Ss=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),Fs={__name:"Cashier",props:["product","cashier_status","cashier_stat_id","tax","special_discount"],setup(f){const T=f,v=m(0);m(5),m(2),m(),m();const r=m(!1),k=m(!1),x=m(!1),_=m(!1),g=m(!1),S=m(""),O=m(""),I=m(1),R=m(0),w=m(0);let i=m(0);const h=m(0),d=m(!1);m({exe:!1,pass:0});const o=ne({products:[],search:"",machine:!1,tax_id:T.tax.id,special_discount_id:_.value==!0?T.special_discount.id:null,cash:null});z(()=>{M()});const M=n=>{T.cashier_status=="false"&&document.addEventListener("keydown",t=>{t.keyCode==112&&p.page.component=="Cashier/Cashier"?(console.log("Start transaction."),t.preventDefault()):t.keyCode==113&&p.page.component=="Cashier/Cashier"?(console.log("Discount"),_.value=!_.value,_.value?l.success("Special discount has been applied!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}):l.error("Special discount has been removed!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}),t.preventDefault()):t.keyCode==114&&p.page.component=="Cashier/Cashier"?(console.log("Transaction ."),t.preventDefault()):t.keyCode==115&&p.page.component=="Cashier/Cashier"?(console.log("Change Quantity."),t.preventDefault()):t.keyCode==117&&p.page.component=="Cashier/Cashier"?(console.log("Description."),t.preventDefault()):t.keyCode==118&&p.page.component=="Cashier/Cashier"?(console.log("Delete Item "),t.preventDefault()):t.keyCode==119&&p.page.component=="Cashier/Cashier"?(g.value||(k.value=!k.value),t.preventDefault()):t.keyCode==120&&p.page.component=="Cashier/Cashier"?(console.log("SKU Look up"),k.value||(g.value=!g.value),t.preventDefault()):t.keyCode==121&&p.page.component=="Cashier/Cashier"?(console.log("Sales Return."),t.preventDefault()):t.ctrlKey&&t.keyCode==66&&p.page.component=="Cashier/Cashier"?oe():t.ctrlKey&&t.keyCode==38&&p.page.component=="Cashier/Cashier"?Y(!0,!1):t.ctrlKey&&t.keyCode==40&&p.page.component=="Cashier/Cashier"?Y(!1,!0):t.ctrlKey&&t.keyCode==13&&p.page.component=="Cashier/Cashier"?E():t.ctrlKey&&t.keyCode==35&&p.page.component=="Cashier/Cashier"?G():r.value==!0&&t.ctrlKey&&t.keyCode==89&&p.page.component=="Cashier/Cashier"?U():r.value==!0&&t.ctrlKey&&t.keyCode==78&&p.page.component=="Cashier/Cashier"?r.value=!r.value:t.ctrlKey&&t.altKey&&t.keyCode==80&&p.page.component=="Cashier/Cashier"?(le(),x.value=!x.value):x.value==!0&&t.ctrlKey&&t.altKey&&t.keyCode==70&&p.page.component=="Cashier/Cashier"?ae():x.value==!0&&t.ctrlKey&&t.altKey&&t.keyCode==89&&p.page.component=="Cashier/Cashier"?q():x.value==!0&&t.ctrlKey&&t.altKey&&t.keyCode==78&&p.page.component=="Cashier/Cashier"?x.value=!x.value:k.value==!0&&t.ctrlKey&&t.altKey&&t.keyCode==89&&p.page.component=="Cashier/Cashier"?(o.products=[],O.value="",k.value=!1):k.value==!0&&t.ctrlKey&&t.altKey&&t.keyCode==78&&p.page.component=="Cashier/Cashier"&&(k.value=!1)}),te()};re(()=>o.products,(n,t)=>{let a=0,$=0;n.forEach(K=>{w.value=0,R.value=0,$=0,a=a+K.cashier_quantity,$=N(K.current_price.price,K.current_discount.discount).discountedPrice*K.cashier_quantity,i.value=i.value+$}),R.value=a,w.value=i.value},{deep:!0});const N=(n,t)=>{if(t<0||t>100)return n;const a=n-n*(t/100);return{...n,discountedPrice:a.toFixed(2)}},j=n=>{let t=0,a=0,$=T.tax.tax/100;return a=parseFloat(n)*$,t=parseFloat(n)+a,t},E=()=>{let n=T.product.find(t=>t.barcode==S.value);if(n==null)l.error("Product not available!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}),S.value="",I.value=1;else if(n!=null)if(n.quantity<=0)l.error("Product is out of stock!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}),S.value="",I.value=1;else{let t=o.products.find($=>$.barcode==n.barcode),a=o.products.findIndex($=>$.barcode==n.barcode);if(t==null)n.cashier_quantity=I.value,o.products.push(n),O.value=n.product_image,l.success("Product added to cart!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}),S.value="",I.value=1;else{let $=o.products[a].cashier_quantity+I.value;o.products[a].cashier_quantity=$,O.value=n.product_image,O.value=n.product_image,l.success("Product added to cart!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}),S.value="",I.value=1}}},b=n=>{const t=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return t.format(n),t.format(n)},te=()=>{p.put(route("cashier_stat.update_status",T.cashier_stat_id))},se=()=>{let n=j(N(w.value,_.value==!0?T.special_discount.discount:0).discountedPrice);parseFloat(o.cash)<parseFloat(n)?l.error("Inputed cash is insuficient",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}):parseFloat(o.cash)==0||o.cash==""||o.cash==null?l.error("Please input cash first to proceed!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}):o.products.length<=0?l.error("Opps looks like there's no products in the cart, please add them first!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}):o.post(route("cashier.store"),{preserveScroll:!0,onSuccess:()=>{l.success("Print print",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}),o.products=[],o.reset(),d.value=!1,O.value="",x.value=!1},onError:()=>{l.error(o.errors.transaction_validation,{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT})}})},q=()=>{x.value=!1,d.value=!0,h.value=o.cash},G=()=>{r.value=!r.value},U=()=>{o.post(route("logout"))},oe=()=>{document.querySelector("#prodBarcodeInput").focus(),l.success("Scanner is ready!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}),S.value=""},le=()=>{document.querySelector("#prodBarcodeInput").blur(),l.success("Scanner is disconnected!",{autoClose:1e3,transition:l.TRANSITIONS.FLIP,position:l.POSITION.TOP_RIGHT}),S.value=""},ae=()=>{document.querySelector("#prodBarcodeInput").blur(),document.querySelector("#inputCash").focus()},Y=(n,t)=>{n?I.value++:t&&I.value!=1&&I.value--};return(n,t)=>(u(),c(L,null,[P(y(ie),{title:"Cashier"}),e("div",kt,[e("div",Tt,[B(e("input",{id:"prodBarcodeInput","onUpdate:modelValue":t[0]||(t[0]=a=>S.value=a),onChange:E},null,544),[[V,S.value]]),B(e("input",{type:"number",class:"border-0 bg-transparent w-11","onUpdate:modelValue":t[1]||(t[1]=a=>I.value=a)},null,512),[[V,I.value]])]),e("div",It,[e("button",{onClick:G,type:"button",class:"focus:outline-none text-white bg-red-600 hover:bg-red-500 focus:ring-4 focus:ring-yellow-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 flex"},[P(H,{icon:"logout",size:"sm"}),C(" Log out ")])]),e("div",Pt,[e("kbd",St,"Purchase Quantity: "+s(I.value),1)]),e("div",$t,[e("div",Nt,[e("div",Ot,[e("div",At,[e("div",Rt,[O.value?(u(),c("img",{key:0,class:"object-contain h-48 w-96",src:O.value},null,8,Lt)):D("",!0)])])]),e("div",Dt,[e("div",jt,[e("div",Ft,[P(H,{icon:"shopping_cart",size:"sm"}),Mt,_.value?(u(),c("span",Kt,[e("small",Ht,[P(H,{class:"text-white",size:"xs",icon:"wheelchair"}),C(" (Special Discount) ")])])):D("",!0)]),e("div",null,[Bt,e("span",Vt,[e("small",null,s(R.value),1)])])]),e("div",qt,[e("table",zt,[e("tbody",null,[(u(!0),c(L,null,F(v.value,a=>(u(),c("tr",Et,[Gt,Ut,Yt,e("td",Zt,[e("button",null,[P(H,{icon:"close_icon",size:"sm",class:"text-red"})])])]))),256))])]),y(o).products.length===0?(u(),c("div",Wt," Scan a product ")):(u(),c("div",Qt,[e("div",Jt,[(u(!0),c(L,null,F(y(o).products,a=>(u(),c("ul",Xt,[e("li",es,[e("div",ts,[e("div",ss,[e("img",{class:"w-8 h-8 rounded-full",src:a.product_image,alt:"Neil image"},null,8,os)]),e("div",ls,[e("p",as,s(a.name),1)]),e("div",ns,s(b(a.current_price.price)),1),e("div",rs,[e("small",null,"x"+s(a.cashier_quantity),1)]),e("div",is,s(b(N(a.current_price.price,a.current_discount.discount).discountedPrice*a.cashier_quantity)),1)])])]))),256))])]))]),e("div",ds,[e("div",null,[e("p",null,[e("span",us,"VAT("+s(f.tax.tax)+"%): ",1),C(" "+s(y(o).products.length==0?b(0):b(j(N(w.value,_.value==!0?f.special_discount.discount:0).discountedPrice)-N(w.value,_.value==!0?f.special_discount.discount:0).discountedPrice)),1)]),e("p",null,[e("span",cs,"Special Discount("+s(_.value==!0?f.special_discount.discount:0)+"%): ",1),C(" "+s(y(o).products.length==0?b(0):b(w.value-N(w.value,_.value==!0?f.special_discount.discount:0).discountedPrice)),1)]),e("p",null,[ps,C(" "+s(y(o).products.length==0?b(0):b(w.value)),1)]),e("p",null,[ms,C(" "+s(y(o).products.length==0?b(0):b(N(w.value,_.value==!0?f.special_discount.discount:0).discountedPrice)),1)]),e("p",null,[hs,C(" "+s(y(o).products.length==0?b(0):b(j(N(w.value,_.value==!0?f.special_discount.discount:0).discountedPrice))),1)]),e("div",_s,[e("button",{onClick:t[2]||(t[2]=a=>x.value=!0),type:"button",class:"focus:outline-none text-white bg-yellow-600 hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2"}," Check out ")])])])])])])]),k.value?(u(),c("div",fs,[e("div",vs,[e("div",gs,[e("div",xs,[bs,e("button",{onClick:t[3]||(t[3]=a=>k.value=!1),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center","data-modal-hide":"defaultModal"},Cs)]),ks,e("div",Ts,[e("button",{onClick:t[4]||(t[4]=a=>(y(o).products=[],O.value="",k.value=!1)),"data-modal-hide":"defaultModal",type:"button",class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Delete All (CTRL + ALT + Y) "),e("button",{onClick:t[5]||(t[5]=a=>k.value=!1),"data-modal-hide":"defaultModal",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"}," Decline (CTRL + ALT + N) ")])])])])):D("",!0),P(W,{show:x.value,onClose:t[8]||(t[8]=a=>x.value=!1),maxWidth:"2xl"},{title:A(()=>[C(" You are going to check out this trasaction, please input Amount cash. Payable amount is "+s(b(j(N(w.value,_.value==!0?f.special_discount.discount:0).discountedPrice))),1)]),content:A(()=>[B(e("input",{id:"inputCash",class:"rounded-lg w-full",type:"number","onUpdate:modelValue":t[6]||(t[6]=a=>y(o).cash=a),autofocus:"",onKeyup:de(q,["enter"])},null,40,Is),[[V,y(o).cash]])]),footer:A(()=>[P(Q,{onClick:t[7]||(t[7]=a=>x.value=!1),class:"mr-2"},{default:A(()=>[C(" Cancel (CTRL + ALT + N) ")]),_:1}),P(J,{class:Z([{"opacity-25":y(o).processing},"bg-green-200 hover:bg-green-400"]),disabled:y(o).processing,onClick:q},{default:A(()=>[Ps,C(" Proceed (CTRL + ALT + Y) ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),P(qe,{SKULookup:g.value,products:T.product},null,8,["SKULookup","products"]),P(Ct,{printModal:d.value,cash__:b(h.value),subtotal1__:b(N(w.value,_.value==!0?f.special_discount.discount:0).discountedPrice),subtotal__:b(w.value),spDiscount:_.value==!0?f.special_discount.discount:0,vat__:f.tax.tax,cashierName:y(ue)().props.auth.user.name,grand_total:b(j(N(w.value,_.value==!0?f.special_discount.discount:0).discountedPrice)),products:y(o).products,onClose_modal:t[9]||(t[9]=a=>d.value=!1),onCheckout__:t[10]||(t[10]=a=>se())},null,8,["printModal","cash__","subtotal1__","subtotal__","spDiscount","vat__","cashierName","grand_total","products"]),P(W,{show:r.value,onClose:t[12]||(t[12]=a=>r.value=!1),maxWidth:"2xl"},{title:A(()=>[C(" Are you sure you want to log-out?")]),content:A(()=>[]),footer:A(()=>[P(Q,{onClick:t[11]||(t[11]=a=>r.value=!1),class:"mr-2"},{default:A(()=>[C(" Cancel (CTRL + ALT + N) ")]),_:1}),P(J,{class:Z([{"opacity-25":y(o).processing},"bg-green-200 hover:bg-green-400"]),disabled:y(o).processing,onClick:U},{default:A(()=>[Ss,C(" Proceed (CTRL + ALT + Y) ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{Fs as default};
