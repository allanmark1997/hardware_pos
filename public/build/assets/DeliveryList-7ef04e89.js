import{r as b,d as a,a as t,b as o,p as S,e as j,F as w,g as V,t as l,O as k,o as c,f as r}from"./app-4abf3069.js";import{_ as u}from"./Icon-1d2570ca.js";import{_ as q}from"./Pagination2-bd359f9d.js";import{_ as D}from"./TextInput-e09318a4.js";import{_ as E}from"./Input-0add1e43.js";import{h as T}from"./moment-fbc5633a.js";import"./index-bfb60029.js";const Y={class:"flex justify-between mt-2"},$={class:"flex gap-2"},B={class:"flex gap-2"},C={class:"flex"},H=t("span",{class:"text-md mt-2 mr-2"},"From",-1),L={class:"flex"},M=t("span",{class:"text-md mt-2 mr-2"},"To",-1),O={class:"flex"},I=["href"],R={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},A={class:"container mx-auto"},G={class:"relative overflow-x-auto"},J={class:"w-full text-sm text-left text-gray-500"},Q=t("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"},"Supplier name"),t("th",{scope:"col",class:"px-6 py-3"},"Receive by"),t("th",{scope:"col",class:"px-6 py-3"},"Status"),t("th",{scope:"col",class:"px-6 py-3"},"Products"),t("th",{scope:"col",class:"px-6 py-3"},"Total Success"),t("th",{scope:"col",class:"px-6 py-3"},"Total Unsuccess"),t("th",{scope:"col",class:"px-6 py-3"},"Created at")])],-1),W={class:"px-6 py-4"},X=["src","alt"],Z={class:"px-6 py-4"},tt=["src","alt"],et={class:"px-6 py-4"},st={key:0,class:"bg-green-400 rounded-md p-1 text-white flex"},ot={key:1,class:"bg-red-400 rounded-md p-1 text-white flex"},at={scope:"row",class:"px-2 py-1 text-gray-900 whitespace-nowrap"},lt={class:"w-full text-xs text-left text-gray-500"},ct=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[t("tr",null,[t("th",{scope:"col",class:"px-1 py-1"},"Product"),t("th",{scope:"col",class:"px-1 py-1"},"No."),t("th",{scope:"col",class:"px-1 py-1"},"Price"),t("th",{scope:"col",class:"px-1 py-1"},"Status"),t("th",{scope:"col",class:"px-1 py-1"},"Sub-total")])],-1),nt={class:"px-1 py-1 flex pt-2 font-bold"},it={class:"px-1 py-1"},rt={class:"px-1 py-1"},dt={class:"px-1 py-1"},pt={key:0,class:"bg-green-400 rounded-md p-1 text-white flex gap-1"},ut={key:1,class:"bg-red-400 rounded-md p-1 text-white flex gap-1"},_t={class:"px-1 py-1"},mt={class:"px-6 py-4"},ht={class:"px-6 py-4"},xt={class:"px-6 py-4 flex gap-2"},ft={class:"flex items-center justify-between"},gt={class:"mt-6 text-sm text-gray-500"},Dt={__name:"DeliveryList",props:["deliveries","date_from","date_to","search"],setup(f){const m=f,d=b(m.date_from),p=b(m.date_to),_=b(m.search),z=n=>T(n).format("MM/DD/YYYY, h:mm:ss a"),h=n=>{let x=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:20,minimumSignificantDigits:1,maximumSignificantDigits:20}).format(n).split("."),i=String(x[1]).slice(0,2),y=i=="un"?"00":i;return String(x[0])+"."+y},P=()=>{k.get(route("deliveries.index",{date_from:d.value,date_to:p.value}))},F=()=>{k.get(route("deliveries.index",{search:_.value,date_from:d.value,date_to:p.value}))},N=()=>{k.get(route("deliveries.index",{date_from:null,date_to:null,search:null}))},U=n=>{let s=0;return n.forEach(e=>{e.status==1&&(s+=e.quantity*e.price.price)}),s},K=n=>{let s=0;return n.forEach(e=>{e.status==0&&(s+=e.quantity*e.price.price)}),s};return(n,s)=>(c(),a(w,null,[t("div",Y,[t("div",$,[t("div",B,[t("div",C,[H,o(D,{id:"date_from",modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),t("div",L,[M,o(D,{id:"date_to",modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=e=>p.value=e),type:"date",class:"mt-1 block w-full",onKeyup:S(P,["enter"])},null,8,["modelValue","onKeyup"])]),t("div",O,[o(E,{modelValue:_.value,"onUpdate:modelValue":s[2]||(s[2]=e=>_.value=e),class:"rounded-lg w-[30vmin]",type:"text",label:"Search delivery",onKeyup:S(F,["enter"])},null,8,["modelValue","onKeyup"])]),d.value||p.value||_.value?(c(),a("button",{key:0,class:"h-10 my-auto mt-5",onClick:N},[o(u,{icon:"close_icon",size:"sm"})])):j("",!0)])]),t("a",{href:n.route("deliveries.export",{date_from:d.value,date_to:p.value}),class:"bg-green-400 hover:bg-green-600 hover:text-white rounded-lg my-auto p-2"},"Export Delivery",8,I)]),t("section",R,[t("div",A,[t("div",G,[t("table",J,[Q,t("tbody",null,[(c(!0),a(w,null,V(f.deliveries.data,(e,x)=>{var g;return c(),a("tr",{key:x,class:"bg-white border-"},[t("td",W,[t("img",{class:"h-8 w-8 rounded-full object-cover",src:e.supplier.image,alt:e.supplier.supplier_name},null,8,X),r(" "+l(e.supplier.supplier_name),1)]),t("td",Z,[t("img",{class:"h-8 w-8 rounded-full object-cover",src:e.user_receiver.profile_photo_url,alt:e.user_receiver.supplier_name},null,8,tt),r(" "+l(((g=e.user_receiver)==null?void 0:g.name)??"Pending"),1)]),t("td",et,[e.status==1?(c(),a("span",st,[o(u,{icon:"check",size:"sm"}),r(" Success ")])):(c(),a("span",ot,[o(u,{icon:"wrong",size:"sm"}),r(" Unuccess ")]))]),t("td",at,[t("table",lt,[ct,t("tbody",null,[(c(!0),a(w,null,V(e.details,(i,y)=>{var v;return c(),a("tr",{key:y,class:"bg-white border-"},[t("td",nt,[o(u,{icon:"shopping_cart",size:"xs"}),r(" "+l((v=i.product)==null?void 0:v.name),1)]),t("td",it,l(i.quantity),1),t("td",rt,l(h(i.price.price)),1),t("td",dt,[i.status==1?(c(),a("small",pt,[o(u,{icon:"check",size:"sm"}),r(" Success ")])):(c(),a("small",ut,[o(u,{icon:"wrong",size:"xs"}),r(" Unsuccess ")]))]),t("td",_t,[t("small",null,l(h(i.quantity*i.price.price)),1)])])}),128))])])]),t("td",mt,l(h(U(e.details))),1),t("td",ht,l(h(K(e.details))),1),t("td",xt,[o(u,{icon:"calendar",size:"md"}),r(" "+l(z(e.created_at)),1)])])}),128))])])]),t("div",ft,[o(q,{links:m.deliveries.links,date_from:d.value,date_to:p.value,search:_.value},null,8,["links","date_from","date_to","search"]),t("p",gt," Showing "+l(f.deliveries.data.length)+" Deliveries ",1)])])])],64))}};export{Dt as default};
