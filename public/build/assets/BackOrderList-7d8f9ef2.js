import{r as w,T as $,p as D,d as u,a as t,b as o,q as M,e as k,F as I,g as R,t as l,w as _,O as T,o as i,f as n,c as A,u as f,n as H}from"./app-7a28f91d.js";import{_ as O}from"./Button-04b8548d.js";import{_ as h}from"./Icon-6956c443.js";import{_ as L}from"./Pagination2-c01aa8a5.js";import{_ as C}from"./TextInput-c6cf102f.js";import{_ as j}from"./SecondaryButton-fc5d9057.js";import{_ as q}from"./ConfirmationModal-75a8cf52.js";import{h as E}from"./moment-fbc5633a.js";import{l as r}from"./index-ad615ec1.js";import"./Modal-3f5137c3.js";const Y={class:"flex justify-between mt-2"},G={class:"flex gap-2"},K={class:"flex gap-2"},U={class:"flex"},Q=t("span",{class:"text-md mt-2 mr-2"},"From",-1),W={class:"flex"},J=t("span",{class:"text-md mt-2 mr-2"},"To",-1),X=["href"],Z={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},tt={class:"container mx-auto"},et={class:"relative overflow-x-auto"},st={class:"w-full text-sm text-left text-gray-500"},ot=t("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"},"Processed by"),t("th",{scope:"col",class:"px-6 py-3"},"Product name"),t("th",{scope:"col",class:"px-6 py-3"},"Price"),t("th",{scope:"col",class:"px-6 py-3"},"Discount"),t("th",{scope:"col",class:"px-6 py-3"},"Quantity"),t("th",{scope:"col",class:"px-6 py-3"},"Status"),t("th",{scope:"col",class:"px-6 py-3"},"Success Sub-total"),t("th",{scope:"col",class:"px-6 py-3"},"Inprogress Sub-total"),t("th",{scope:"col",class:"px-6 py-3"},"Remarks"),t("th",{scope:"col",class:"px-6 py-3"},"Created at"),t("th",{scope:"col",class:"px-6 py-3"},"Action")])],-1),at={class:"px-6 py-4"},lt=["src","alt"],nt={class:"px-6 py-4"},rt={class:"px-6 py-4"},it={class:"px-6 py-4"},ct={class:"px-6 py-4"},dt={class:"px-6 py-4"},ut={key:0,class:"bg-green-400 rounded-md p-1 text-white flex"},pt={key:1,class:"bg-orange-400 rounded-md p-1 text-white flex gap-1"},mt={key:2,class:"bg-red-400 rounded-md p-1 text-white flex gap-1"},_t={class:"px-6 py-4"},ht={class:"px-6 py-4"},ft={class:"px-6 py-4"},xt={class:"w-full text-sm text-gray-900 break-words"},yt={class:"px-6 py-4 flex gap-2"},gt={class:"px-6 py-4 gap-2"},vt={class:"flex items-center justify-between"},wt={class:"mt-6 text-sm text-gray-500"},St=t("p",{class:"text-red-500"}," Once approved, this action can update the system and this is not reversible! ",-1),bt=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),$t={__name:"BackOrderList",props:["back_orders","date_from","date_to"],setup(x){const y=x,p=w(y.date_from),m=w(y.date_to),c=w(!1),s=$({backorder:"",password:""}),V=d=>E(d).format("MM/DD/YYYY, h:mm:ss a"),g=d=>{let e=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:20,minimumSignificantDigits:1,maximumSignificantDigits:20}).format(d).split("."),v=String(e[1]).slice(0,2),F=v=="un"?"00":v;return String(e[0])+"."+F},N=()=>{T.get(route("back_orders.index",{date_from:p.value,date_to:m.value}))},P=()=>{T.get(route("back_orders.index",{date_from:null,date_to:null}))},z=d=>{s.backorder=d,c.value=!c.value},B=()=>{s.post(route("authenticate_user.authenticate_user"),{preserveScroll:!0,onSuccess:()=>{s.put(route("back_orders.authorize",s.backorder),{preserveScroll:!0,onSuccess:()=>{r.success("Successfully authorized back order as settled",{autoClose:!0,transition:r.TRANSITIONS.FLIP,position:r.POSITION.BOTTOM_RIGHT}),s.reset(),c.value=!1},onError:()=>{r.error(s.errors.message,{autoClose:!0,transition:r.TRANSITIONS.FLIP,position:r.POSITION.BOTTOM_RIGHT}),s.reset(),c.value=!1}})},onError:()=>{r.error(s.errors.message,{autoClose:!0,transition:r.TRANSITIONS.FLIP,position:r.POSITION.BOTTOM_RIGHT})}})};return(d,a)=>{const S=D("Input");return i(),u(I,null,[t("div",Y,[t("div",G,[t("div",K,[t("div",U,[Q,o(C,{id:"date_from",modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),t("div",W,[J,o(C,{id:"date_to",modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value=e),type:"date",class:"mt-1 block w-full",onKeyup:M(N,["enter"])},null,8,["modelValue","onKeyup"])]),p.value||m.value?(i(),u("button",{key:0,class:"h-10 my-auto mt-5",onClick:P},[o(h,{icon:"close_icon",size:"sm"})])):k("",!0)])]),t("a",{href:d.route("back_orders.export",{date_from:p.value,date_to:m.value}),class:"bg-green-400 hover:bg-green-600 hover:text-white rounded-lg my-auto p-2"},"Export Back-orders",8,X)]),t("section",Z,[t("div",tt,[t("div",et,[t("table",st,[ot,t("tbody",null,[(i(!0),u(I,null,R(x.back_orders.data,(e,b)=>(i(),u("tr",{key:b,class:"bg-white border-"},[t("td",at,[t("img",{class:"h-8 w-8 rounded-full object-cover",src:e.user.profile_photo_url,alt:e.user.name},null,8,lt),n(" "+l(e.user.name),1)]),t("td",nt,l(e.product.name),1),t("td",rt,l(g(e.price.price)),1),t("td",it,l(e.discount.discount)+"%",1),t("td",ct,l(e.quantity),1),t("td",dt,[e.status==1?(i(),u("span",ut,[o(h,{icon:"check",size:"sm"}),n(" Success ")])):e.status==0?(i(),u("span",pt,[o(h,{icon:"wrong",size:"sm"}),n(" Pending ")])):(i(),u("span",mt,[o(h,{icon:"wrong",size:"sm"}),n(" Cancelled ")]))]),t("td",_t,l(g(e.status==1?e.price.price*e.quantity:0)),1),t("td",ht,l(g(e.status==0?e.price.price*e.quantity:0)),1),t("td",ft,[t("p",xt,l(e.remarks),1)]),t("td",yt,[o(h,{icon:"calendar",size:"sm"}),n(" "+l(V(e.created_at)),1)]),t("td",gt,[e.status==0?(i(),A(O,{key:0,onClick:v=>z(e)},{default:_(()=>[n("Authorize")]),_:2},1032,["onClick"])):k("",!0)])]))),128))])])]),t("div",vt,[o(L,{links:y.back_orders.links,date_from:p.value,date_to:m.value},null,8,["links","date_from","date_to"]),t("p",wt," Showing "+l(x.back_orders.data.length)+" Back-orders ",1)])])]),o(q,{show:c.value,onClose:a[4]||(a[4]=e=>c.value=!1),maxWidth:"2xl"},{title:_(()=>[n(" Please input administrators pass code")]),content:_(()=>[St,o(S,{type:"password",label:"Administrator's passcode",modelValue:f(s).password,"onUpdate:modelValue":a[2]||(a[2]=e=>f(s).password=e)},null,8,["modelValue"])]),footer:_(()=>[o(j,{onClick:a[3]||(a[3]=e=>c.value=!1),class:"mr-2"},{default:_(()=>[n(" nevermind ")]),_:1}),o(O,{class:H([{"opacity-25":f(s).processing},"bg-green-200 hover:bg-green-400"]),disabled:f(s).processing,onClick:B},{default:_(()=>[bt,n("Â Submit ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64)}}};export{$t as default};
