import{r as p,T as F,o as f,d as v,a as e,b as a,p as w,e as H,F as b,g as R,t as h,w as d,O as g,f as u,u as y,n as K}from"./app-d10659b1.js";import{_ as k}from"./Button-bd84fc2a.js";import{_ as I}from"./Icon-720210fc.js";import{_ as L,h as j}from"./moment-4a49c77f.js";import{_ as T}from"./TextInput-8fcf4e49.js";import{_ as S}from"./Input-1a176ae9.js";import B from"./Product-4cc0c80f.js";import{_ as M}from"./ConfirmationModal-c2f8c89f.js";import{_ as U}from"./SecondaryButton-a6ee9729.js";import{l as r}from"./index-824a8249.js";import"./Modal-a896277f.js";const Y={class:"flex justify-between mt-2"},E={class:"flex gap-2"},G={class:"flex gap-2"},q={class:"flex"},W=e("span",{class:"text-md mt-2 mr-2"},"From",-1),J={class:"flex"},Q=e("span",{class:"text-md mt-2 mr-2"},"To",-1),X={class:"flex"},Z={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},ee={class:"container mx-auto"},te={class:"relative overflow-x-auto"},se={class:"w-full text-sm text-left text-gray-500"},oe=e("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Supplier name"),e("th",{scope:"col",class:"px-6 py-3"},"Products"),e("th",{scope:"col",class:"px-6 py-3"},"Total"),e("th",{scope:"col",class:"px-6 py-3"},"Created at"),e("th",{scope:"col",class:"px-6 py-3"},"Action")])],-1),ae={class:"px-6 py-4"},le=["src","alt"],re={scope:"row",class:"px-2 py-1 text-gray-900 whitespace-nowrap"},ie={class:"px-6 py-4"},ne={class:"px-6 py-4 flex gap-2"},ce={class:"px-6 py-4 gap-2"},de={class:"flex items-center justify-between"},ue={class:"mt-6 text-sm text-gray-500"},me=e("p",{class:"text-red-500"}," Clicking can update the system and it may cause a possible error! ",-1),_e=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),Se={__name:"DeliveryList",props:["deliveries","date_from","date_to","search"],setup(x){const _=x,i=p(_.date_from),n=p(_.date_to),m=p(_.search),c=p(!1),o=F({delivery:!1,status:!1,password:""}),V=l=>j(l).format("MM/DD/YYYY, h:mm:ss a"),C=l=>{const s=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return s.format(l),s.format(l)},N=()=>{g.get(route("deliveries.receive_index",{date_from:i.value,date_to:n.value}))},O=()=>{g.get(route("deliveries.receive_index",{search:m.value,date_from:i.value,date_to:n.value}))},P=()=>{g.get(route("deliveries.receive_index",{date_from:null,date_to:null,search:null}))},$=l=>{let s=0;return l.forEach(t=>{t.status==0&&(s+=t.quantity*t.price.price)}),s},z=l=>{o.delivery=l,c.value=!c.value},A=()=>{o.post(route("authenticate_user.authenticate_user"),{preserveScroll:!0,onSuccess:()=>{r.success("Delivery has been authorized",{autoClose:1e3,transition:r.TRANSITIONS.FLIP,position:r.POSITION.TOP_RIGHT}),o.delivery.status==1?o.status=0:o.status=1,o.put(route("deliveries.authenticate",o.delivery),{preserveScroll:!0,onSuccess:()=>{r.success("Delivery set as delivered",{autoClose:1e3,transition:r.TRANSITIONS.FLIP,position:r.POSITION.TOP_RIGHT}),c.value=!1,o.reset()}})},onError:()=>{r.error(o.errors.message,{autoClose:1e3,transition:r.TRANSITIONS.FLIP,position:r.POSITION.TOP_RIGHT})}})};return(l,s)=>(f(),v(b,null,[e("div",Y,[e("div",E,[e("div",G,[e("div",q,[W,a(T,{id:"date_from",modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),e("div",J,[Q,a(T,{id:"date_to",modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=t=>n.value=t),type:"date",class:"mt-1 block w-full",onKeyup:w(N,["enter"])},null,8,["modelValue","onKeyup"])]),e("div",X,[a(S,{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=t=>m.value=t),class:"rounded-lg w-[30vmin]",type:"text",label:"Search delivery",onKeyup:w(O,["enter"])},null,8,["modelValue","onKeyup"])]),i.value||n.value||m.value?(f(),v("button",{key:0,class:"h-10 my-auto mt-5",onClick:P},[a(I,{icon:"close_icon",size:"sm"})])):H("",!0)])])]),e("section",Z,[e("div",ee,[e("div",te,[e("table",se,[oe,e("tbody",null,[(f(!0),v(b,null,R(x.deliveries.data,(t,D)=>(f(),v("tr",{key:D,class:"bg-white border-"},[e("td",ae,[e("img",{class:"h-8 w-8 rounded-full object-cover",src:t.supplier.image,alt:t.supplier.supplier_name},null,8,le),u(" "+h(t.supplier.supplier_name),1)]),e("td",re,[a(B,{delivery_details:t.details},null,8,["delivery_details"])]),e("td",ie,h(C($(t.details))),1),e("td",ne,[a(I,{icon:"calendar",size:"md"}),u(" "+h(V(t.created_at)),1)]),e("td",ce,[a(k,{onClick:pe=>z(t)},{default:d(()=>[u("Authorize")]),_:2},1032,["onClick"])])]))),128))])])]),e("div",de,[a(L,{links:_.deliveries.links,date_from:i.value,date_to:n.value,search:m.value},null,8,["links","date_from","date_to","search"]),e("p",ue," Showing "+h(x.deliveries.data.length)+" Deliveries ",1)])])]),a(M,{show:c.value,onClose:s[5]||(s[5]=t=>c.value=!1),maxWidth:"2xl"},{title:d(()=>[u(" Are you sure you want to authorize this delivery? ")]),content:d(()=>[me,a(S,{label:"Administrator password",type:"password",modelValue:y(o).password,"onUpdate:modelValue":s[3]||(s[3]=t=>y(o).password=t)},null,8,["modelValue"])]),footer:d(()=>[a(U,{onClick:s[4]||(s[4]=t=>c.value=!1),class:"mr-2"},{default:d(()=>[u(" nevermind ")]),_:1}),a(k,{class:K([{"opacity-25":y(o).processing},"bg-green-200 hover:bg-green-400"]),disabled:y(o).processing,onClick:A},{default:d(()=>[_e,u(" Â Submit ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{Se as default};
