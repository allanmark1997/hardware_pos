import{r as q,o as a,d,a as t,b as l,p as K,e as I,F as N,g as E,t as c,O as U,f as k}from"./app-d10659b1.js";import{_ as n}from"./Icon-720210fc.js";import{_ as L,h as R}from"./moment-4a49c77f.js";import{_ as F}from"./TextInput-8fcf4e49.js";import{_ as W}from"./Input-1a176ae9.js";import"./index-824a8249.js";const G={class:"flex justify-between mt-2"},J={class:"flex gap-2"},Q={class:"flex gap-2"},X={class:"flex"},Z=t("span",{class:"text-md mt-2 mr-2"},"From",-1),tt={class:"flex"},st=t("span",{class:"text-md mt-2 mr-2"},"To",-1),et={class:"flex"},ot=["href"],lt={class:"text-gray-600 bg-white rounded-lg py-5 px-3 mb-5 mt-2"},ct={class:"container mx-auto"},at={class:"relative overflow-x-auto"},dt={class:"w-full text-sm text-left text-gray-500"},nt=t("thead",{class:"text-xs text-white uppercase bg-yellow-500"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"},"Transaction ID"),t("th",{scope:"col",class:"px-6 py-3"},"Processed by"),t("th",{scope:"col",class:"px-6 py-3"},"Status"),t("th",{scope:"col",class:"px-6 py-3"}," Payment Method & Customer Type "),t("th",{scope:"col",class:"px-6 py-3"},"Tax & Discount"),t("th",{scope:"col",class:"px-6 py-3"},"Products"),t("th",{scope:"col",class:"px-6 py-3"},"Total Discount & VAT"),t("th",{scope:"col",class:"px-6 py-3"},"Total Paid"),t("th",{scope:"col",class:"px-6 py-3"},"Total Unsuccess"),t("th",{scope:"col",class:"px-6 py-3"},"Created at")])],-1),it={class:"px-6 py-4"},_t={class:"px-6 py-4"},rt={class:"flex gap-2"},pt=["src","alt"],ut={class:"px-6 py-4"},mt={key:0,class:"flex gap-1"},ht=t("span",{class:"bg-green-400 rounded-md p-1 text-white"}," Success ",-1),xt={key:1,class:"flex gap-1"},yt=t("span",{class:"bg-orange-400 rounded-md p-1 text-white"}," Unsuccess ",-1),ft={class:"px-6 py-4"},gt={class:"flex p-1 w-[8vmin]"},vt={key:0,class:"flex gap-1"},bt=t("small",{class:"bg-green-400 rounded-md p-1 text-white w-full"}," Walk-in ",-1),wt={key:1,class:"flex gap-1"},kt=t("small",{class:"bg-orange-400 rounded-md p-1 text-white"}," Regular ",-1),Vt={class:"flex"},Tt={key:0,class:"flex gap-1"},zt={key:1},Dt={class:"px-6 py-4"},Pt={class:"flex rounded-lg bg-red-400 p-[3px] text-white"},St=t("small",null,"VAT: ",-1),qt={class:"flex rounded-lg bg-orange-400 p-[3px] text-white mt-1"},Nt=t("small",null,"SD: ",-1),Ut={scope:"row",class:"px-2 py-1 text-gray-900 whitespace-nowrap"},Ct={class:"w-full text-xs text-left text-gray-500"},Kt=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[t("tr",null,[t("th",{scope:"col",class:"px-1 py-1 flex"},"Product"),t("th",{scope:"col",class:"px-1 py-1"},"No."),t("th",{scope:"col",class:"px-1 py-1"},"Price"),t("th",{scope:"col",class:"px-1 py-1"},"Discount %"),t("th",{scope:"col",class:"px-1 py-1"},"Status"),t("th",{scope:"col",class:"px-1 py-1"},"Total Discount"),t("th",{scope:"col",class:"px-1 py-1"},"Sub-total")])],-1),Et={class:"px-1 py-1 flex"},Ft={class:"px-1 py-1"},Yt={class:"px-1 py-1"},$t={class:"px-1 py-1"},jt={class:"px-1 py-1"},At={key:0,class:"bg-orange-400 rounded-sm p-[1px] text-white"},Bt={key:1,class:"bg-green-400 rounded-sm p-[1px] text-white"},Mt={class:"px-1 py-1"},Ot={class:"px-1 py-1"},Ht={class:"px-6 py-4"},It={class:"flex rounded-lg bg-red-400 p-[3px] text-white"},Lt={class:"flex"},Rt={class:"flex rounded-lg bg-orange-400 p-[3px] text-white mt-1"},Wt={class:"flex"},Gt={class:"px-6 py-4"},Jt={class:"px-6 py-4"},Qt={class:"px-6 py-4 flex gap-2"},Xt={class:"flex items-center justify-between"},Zt={class:"mt-6 text-sm text-gray-500"},as={__name:"TransactionList",props:["transactions","date_from","date_to","search"],setup(P){const V=P,u=q(V.date_from),m=q(V.date_to),x=q(V.search),Y=e=>R(e).format("MM/DD/YYYY, h:mm:ss a"),h=e=>{const o=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return o.format(e),o.format(e)},$=()=>{U.get(route("transactions.index",{date_from:u.value,date_to:m.value}))},j=()=>{U.get(route("transactions.index",{search:x.value,date_from:u.value,date_to:m.value}))},A=()=>{U.get(route("transactions.index",{date_from:null,date_to:null,search:null}))},B=e=>{let o=0,s=e.sale_discount.discount/100;if(e.status==1)for(let i=0;i<e.quantity;i++)o+=e.price.price*s;return o},M=e=>{let o=0,s=0,i=e.sale_discount.discount/100;if(e.status==1)for(let r=0;r<e.quantity;r++)s=e.price.price*i,o+=e.price.price-s;else o+=e.price.price*e.quantity;return o},S=(e,o,s,i)=>{let r=0,y=0,v=0,f=0,g=0,T=o/100,z=s/100;if(e.forEach(p=>{let b=0,w=0,D=p.sale_discount.discount/100;if(p.status==1)for(let _=0;_<p.quantity;_++)w=p.price.price*D,b+=p.price.price-w;r+=b}),f=r*T,y=r-f,g=y*z,v=y+g,i==0)return v;if(i==1)return g;if(i==2)return f},O=e=>{let o=0;return e.forEach(s=>{s.status==0&&(o=s.price.price*s.quantity)}),o};return(e,o)=>(a(),d(N,null,[t("div",G,[t("div",J,[t("div",Q,[t("div",X,[Z,l(F,{id:"date_from",modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"])]),t("div",tt,[st,l(F,{id:"date_to",modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=s=>m.value=s),type:"date",class:"mt-1 block w-full",onKeyup:K($,["enter"])},null,8,["modelValue","onKeyup"])]),t("div",et,[l(W,{modelValue:x.value,"onUpdate:modelValue":o[2]||(o[2]=s=>x.value=s),class:"rounded-lg w-[30vmin]",type:"text",label:"Search transaction",onKeyup:K(j,["enter"])},null,8,["modelValue","onKeyup"])]),u.value||m.value||x.value?(a(),d("button",{key:0,class:"h-10 my-auto mt-5",onClick:A},[l(n,{icon:"close_icon",size:"sm"})])):I("",!0)])]),t("a",{href:e.route("transactions.export",{date_from:u.value,date_to:m.value,search:x.value}),class:"bg-green-400 hover:bg-green-600 hover:text-white rounded-lg my-auto p-2"},"Export Transaction",8,ot)]),t("section",lt,[t("div",ct,[t("div",at,[t("table",dt,[nt,t("tbody",null,[(a(!0),d(N,null,E(P.transactions.data,(s,i)=>{var r,y,v,f,g,T,z,p,b,w,D;return a(),d("tr",{key:i,class:"bg-white border-"},[t("td",it,c(s.id),1),t("td",_t,[t("small",rt,[t("img",{class:"h-8 w-8 rounded-full object-cover",src:s.accommodate_by.profile_photo_url,alt:s.accommodate_by.name},null,8,pt),k(" "+c(((r=s.accommodate_by)==null?void 0:r.name)??"Pending"),1)])]),t("td",ut,[s.status==1?(a(),d("div",mt,[l(n,{icon:"check",size:"sm"}),ht])):(a(),d("div",xt,[l(n,{icon:"wrong",size:"xs"}),yt]))]),t("td",ft,[t("div",gt,[s.customer_type==0?(a(),d("div",vt,[l(n,{icon:"user",size:"md"}),bt])):(a(),d("div",wt,[l(n,{icon:"user",size:"md"}),kt]))]),t("div",Vt,[s.payment_method==0?(a(),d("small",Tt,[l(n,{icon:"cash",size:"sm"}),k(" Cash ")])):(a(),d("small",zt,"Other"))])]),t("td",Dt,[t("div",Pt,[l(n,{icon:"tax",size:"sm"}),St,t("small",null,c((y=s.tax)==null?void 0:y.tax)+"% ",1)]),t("div",qt,[l(n,{icon:"wheelchair",size:"sm"}),Nt,t("small",null,c(((v=s.special_discount)==null?void 0:v.discount)??"0")+"%",1)])]),t("td",Ut,[t("table",Ct,[Kt,t("tbody",null,[(a(!0),d(N,null,E(s.transaction_details,(_,H)=>{var C;return a(),d("tr",{key:H,class:"bg-white border-"},[t("td",Et,[l(n,{icon:"shopping_cart",size:"xs"}),k(" "+c((C=_.product)==null?void 0:C.name),1)]),t("td",Ft,c(_.quantity),1),t("td",Yt,c(h(_.price.price)),1),t("td",$t,c(_.sale_discount.discount)+"% ",1),t("td",jt,[_.status==0?(a(),d("small",At," Unsuccess ")):(a(),d("small",Bt," Success "))]),t("td",Mt,[t("small",null,c(h(B(_))),1)]),t("td",Ot,[t("small",null,c(h(M(_))),1)])])}),128))])])]),t("td",Ht,[t("div",It,[t("small",Lt,[l(n,{icon:"tax",size:"sm"}),k("VAT: ")]),t("small",null,c(h(S(s.transaction_details,((f=s.special_discount)==null?void 0:f.discount)??0,((g=s.tax)==null?void 0:g.tax)??0,1))),1)]),t("div",Rt,[t("small",Wt,[l(n,{icon:"wheelchair",size:"sm"}),k("SD: ")]),t("small",null,c(h(S(s.transaction_details,((T=s.special_discount)==null?void 0:T.discount)??0,((z=s.tax)==null?void 0:z.tax)??0,2))),1)])]),t("td",Gt,c(h(S(s.transaction_details,((p=s.special_discount)==null?void 0:p.discount)??0,((b=s.tax)==null?void 0:b.tax)??0,0))),1),t("td",Jt,c(h(O(s.transaction_details,((w=s.special_discount)==null?void 0:w.discount)??0,((D=s.tax)==null?void 0:D.tax)??0))),1),t("td",Qt,[l(n,{icon:"calendar",size:"md"}),t("small",null,c(Y(s.created_at)),1)])])}),128))])])]),t("div",Xt,[l(L,{links:V.transactions.links,date_from:u.value,date_to:m.value,search:x.value},null,8,["links","date_from","date_to","search"]),t("p",Zt," Showing "+c(P.transactions.data.length)+" Transactions ",1)])])])],64))}};export{as as default};
